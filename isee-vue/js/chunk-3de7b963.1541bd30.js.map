{"version":3,"sources":["webpack:///./node_modules/echarts/lib/coord/geo/Geo.js","webpack:///./node_modules/echarts/lib/component/helper/roamHelper.js","webpack:///./node_modules/echarts/lib/component/helper/MapDraw.js","webpack:///./node_modules/echarts/lib/coord/geo/fix/textCoord.js","webpack:///./node_modules/echarts/lib/visual/visualSolution.js","webpack:///./src/views/WorldMap.vue?a10b","webpack:///./node_modules/echarts/lib/component/visualMap/ContinuousModel.js","webpack:///./node_modules/echarts/lib/coord/geo/fix/nanhai.js","webpack:///./node_modules/echarts/lib/component/visualMap/ContinuousView.js","webpack:///./node_modules/echarts/lib/action/geoRoam.js","webpack:///./node_modules/echarts/lib/component/helper/RoamController.js","webpack:///./node_modules/echarts/lib/coord/geo/geoJSONLoader.js","webpack:///./node_modules/echarts/lib/chart/map/MapSeries.js","webpack:///./src/views/WorldMap.vue?bb4e","webpack:///src/views/WorldMap.vue","webpack:///./src/views/WorldMap.vue?a285","webpack:///./src/views/WorldMap.vue","webpack:///./node_modules/echarts/lib/chart/map/mapVisual.js","webpack:///./node_modules/echarts/lib/coord/geo/geoSourceManager.js","webpack:///./node_modules/echarts/lib/visual/VisualMapping.js","webpack:///./node_modules/echarts/lib/visual/visualDefault.js","webpack:///./node_modules/echarts/lib/chart/map.js","webpack:///./node_modules/echarts/lib/coord/geo/fix/geoCoord.js","webpack:///./node_modules/echarts/lib/coord/View.js","webpack:///./node_modules/echarts/lib/component/helper/selectableMixin.js","webpack:///./node_modules/echarts/lib/component/visualMap/VisualMapView.js","webpack:///./node_modules/echarts/lib/component/visualMapContinuous.js","webpack:///./node_modules/echarts/lib/action/createDataSelectAction.js","webpack:///./node_modules/echarts/lib/chart/map/backwardCompat.js","webpack:///./node_modules/echarts/lib/component/helper/interactionMutex.js","webpack:///./node_modules/echarts/lib/chart/map/MapView.js","webpack:///./node_modules/echarts/lib/coord/geo/fix/diaoyuIsland.js","webpack:///./node_modules/echarts/lib/component/visualMap/visualEncoding.js","webpack:///./node_modules/echarts/lib/component/visualMap/preprocessor.js","webpack:///./node_modules/echarts/lib/component/visualMap/typeDefaulter.js","webpack:///./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack:///./node_modules/echarts/lib/coord/geo/geoSVGLoader.js","webpack:///./node_modules/echarts/lib/component/visualMap/helper.js","webpack:///./node_modules/echarts/lib/chart/map/mapSymbolLayout.js","webpack:///./node_modules/echarts/lib/component/visualMap/visualMapAction.js","webpack:///./node_modules/echarts/lib/action/roamHelper.js","webpack:///./node_modules/echarts/lib/chart/helper/createListSimply.js","webpack:///./node_modules/echarts/lib/component/visualMap/VisualMapModel.js","webpack:///./node_modules/echarts/lib/coord/geo/geoCreator.js","webpack:///./node_modules/echarts/lib/component/helper/sliderMove.js","webpack:///./node_modules/echarts/lib/chart/map/mapDataStatistic.js"],"names":["zrUtil","BoundingRect","View","geoSourceManager","Geo","name","map","nameMap","invertLongitute","call","this","source","load","_nameCoordMap","nameCoordMap","_regionsMap","regionsMap","_invertLongitute","regions","_rect","boundingRect","doConvert","methodName","ecModel","finder","value","geoModel","seriesModel","coordSys","coordinateSystem","getReferringComponents","prototype","constructor","type","dimensions","containCoord","coord","i","length","contain","transformTo","x","y","width","height","rect","getBoundingRect","clone","rawTransformable","_rawTransformable","transform","calculateTransform","decomposeTransform","scale","updateTransform","_updateTransform","getRegion","get","getRegionByCoord","addGeoCoord","geoCoord","set","getGeoCoord","dataToPoint","data","noRoam","out","convertToPixel","curry","convertFromPixel","mixin","_default","module","exports","updateViewOnPan","controllerHost","dx","dy","target","pos","position","dirty","updateViewOnZoom","zoomDelta","zoomX","zoomY","zoomLimit","newZoom","zoom","zoomMin","min","zoomMax","max","Infinity","Math","zoomScale","RoamController","roamHelper","_cursorHelper","onIrrelevantElement","graphic","_component","getUID","getFixedItemStyle","model","itemStyle","getItemStyle","areaColor","fill","updateMapSelectHandler","mapDraw","mapOrGeoModel","regionsGroup","api","fromView","off","on","_mouseDownFlag","e","el","__regions","parent","action","mainType","batch","region","from","uid","id","dispatchAction","updateMapSelected","eachChild","otherRegionEl","each","trigger","isSelected","MapDraw","updateGroup","group","Group","_controller","getZr","_controllerHost","_updateGroup","_mapName","_initialized","add","_regionsGroup","_backgroundGroup","draw","payload","isGeo","getData","eachComponent","subType","mapSeries","getHostGeoModel","geo","_updateBackground","_roamTransformable","slice","removeAll","itemStyleAccessPath","hoverItemStyleAccessPath","labelAccessPath","hoverLabelAccessPath","createHashMap","regionGroup","compoundPath","CompoundPath","segmentIgnoreThreshold","shape","paths","dataIdx","regionModel","getRegionModel","itemStyleModel","getModel","hoverItemStyleModel","hoverItemStyle","labelModel","hoverLabelModel","indexOfName","visualColor","getItemVisual","transformPoint","point","geometries","geometry","points","exterior","push","Polygon","interiors","interior","j","setStyle","style","strokeNoScale","culling","showLabel","hoverShowLabel","isDataNaN","isNaN","mapDimension","itemLayout","getItemLayout","labelFetcher","query","textEl","Text","center","z2","silent","setLabelStyle","hoverStyle","labelDataIndex","defaultText","useInsideStyle","textAlign","textVerticalAlign","setItemGraphicEl","eventData","componentType","componentIndex","geoIndex","option","groupRegions","highDownSilentOnTouch","setHoverStyle","_updateController","remove","dispose","removeGraphic","mapName","makeGraphic","root","controller","getZoom","enable","makeActionBase","extend","originX","originY","traverse","attr","setPointerChecker","getViewRectAfterRoam","coordsOffsetMap","mapType","coordFix","cp","VisualMapping","hasKeys","obj","hasOwnProperty","createVisualMappings","stateList","supplementVisualOption","visualMappings","state","mappings","createMappings","visualData","visualType","isValidType","mappingOption","visual","__hidden","__alphaForOpacity","Creater","replaceVisualOption","thisOption","newOption","keys","has","key","applyVisual","getValueState","scope","dimension","dataIndex","visualTypesMap","getVisual","setVisual","setItemVisual","eachItem","valueOrIndex","index","rawDataItem","getRawDataItem","visualMap","valueState","visualTypes","len","prepareVisualTypes","incrementalApplyVisual","dim","progress","params","getDimension","next","VisualMapModel","numberUtil","DEFAULT_BAR_BOUND","ContinuousModel","defaultOption","align","calculable","range","realtime","itemHeight","itemWidth","hoverLink","hoverLinkDataSize","hoverLinkOnHandle","optionUpdated","isInit","superApply","arguments","resetExtent","resetVisual","mappingMethod","dataExtent","getExtent","_resetRange","resetItemSize","itemSize","_orient","reverse","auto","isArray","completeVisualOption","apply","symbolSize","setSelected","selected","getSelected","dataInterval","asc","findTargetDataIndices","result","eachTargetSeries","dataIndices","getDataDimension","seriesId","getVisualMeta","getColorVisual","oVals","getColorStopValues","iVals","stops","setStop","color","iIdx","oIdx","iLen","oLen","first","stopsLen","outerColors","visualMapModel","count","step","stopValues","Region","k","LinearGradient","eventTool","VisualMapView","sliderMove","helper","modelUtil","linearMap","mathMin","mathMax","HOVER_LINK_SIZE","HOVER_LINK_OUT","ContinuousView","init","_shapes","_dataInterval","_handleEnds","_useHandle","_hoverLinkDataIndices","_dragging","_hovering","doRender","_buildView","thisGroup","_resetInterval","_renderBar","dataRangeText","_renderEndsText","_updateView","renderBackground","_enableHoverLinkToSeries","_enableHoverLinkFromSeries","positionGroup","endsIndex","text","textGap","barGroup","_applyTransform","orient","textStyleModel","textFont","getFont","textFill","getTextColor","targetGroup","shapes","useHandle","itemAlign","getItemAlign","_createBarGroup","outOfRange","createPolygon","inRange","getCursor","bind","_dragHandle","textRect","getTextRect","textSize","handleThumbs","handleLabels","handleLabelPoints","_createHandle","_createIndicator","handleIndex","onDrift","onDragEnd","handleThumb","createHandlePoints","handleLabel","draggable","drift","onmousemove","stop","event","ondragend","handleLabelPoint","indicator","invisible","indicatorLabel","indicatorLabelPoint","isEnd","vertex","_updateInterval","visualMapId","_clearHoverLinkToSeries","useHoverLinkOnHandle","_doHoverLinkToSeries","sizeExtent","delta","handleEnds","forSketch","outOfRangeHandleEnds","inRangeHandleEnds","visualInRange","_createBarVisual","visualOutOfRange","barColor","opacity","setShape","barPoints","_updateHandle","forceState","opts","convertOpacityToAlpha","colorStops","_makeColorGradient","symbolSizes","getControllerVisual","_createBarPoints","handlesColor","sampleNumber","offset","currValue","inverse","rotation","PI","textPoint","applyTransform","getTransform","formatValueText","_showIndicator","cursorValue","textValue","rangeSymbol","halfHoverLinkSize","createIndicatorPoints","self","offsetX","offsetY","zr","_hoverLinkFromSeriesMouseOver","_hideIndicator","_clearHoverLinkFromSeries","cursorPos","hoverOnBar","getHalfHoverLinkSize","hoverRange","valueRange","oldBatch","newBatch","resultBatches","compressBatches","_dispatchHighDown","makeHighDownBatch","dataModel","getSeriesByIndex","seriesIndex","isTargetSeries","dataType","indices","element","global","cursor","isRange","extentMax","echarts","_roamHelper","updateCenterAndZoom","registerAction","update","componentModel","res","setCenter","setZoom","seriesGroup","Eventful","interactionMutex","pointerChecker","_zr","_opt","mousedownHandler","mousedown","mousemoveHandler","mousemove","mouseupHandler","mouseup","mousewheelHandler","mousewheel","pinchHandler","pinch","controlType","opt","disable","defaults","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","isDragging","isPinching","_pinching","isMiddleOrRightButtonOnMouseUpDown","_x","_y","isAvailableBehavior","gestureEvent","isTaken","oldX","oldY","newX","newY","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","abs","factor","checkPointerAndTrigger","absDelta","scrollDelta","pinchScale","pinchX","pinchY","eventName","behaviorToCheck","contollerEvent","settings","setting","isString","_util","parseGeoJson","_model","makeInner","fixNanhai","fixTextCoord","fixGeoCoord","fixDiaoyuIsland","inner","mapRecord","parsed","specialAreas","geoJSON","Error","message","regionName","specialArea","left","top","regionRect","union","createListSimply","SeriesModel","_format","encodeHTML","addCommas","dataSelectableMixin","_dataProvider","retrieveRawAttr","MapSeries","dependencies","layoutMode","needsDrawMap","getInitialData","valueDim","dataNameMap","selectTargetList","toAppendNames","getName","geoSource","getMapType","updateSelectedMap","appendValues","dependentModels","getRawValue","getItemModel","formatTooltip","formattedValue","seriesNames","otherIndex","originalData","join","getTooltipPosition","zlevel","z","aspectScale","showLegendSymbol","dataRangeHoverLink","boundingCoords","scaleLimit","label","show","borderWidth","borderColor","emphasis","render","_vm","_h","$createElement","_c","_self","staticClass","class","unfold","staticStyle","attrs","selectUnfold","querySearch","handleSelect","callback","$$v","expression","ref","nameList","handleCurrentChange","elDrawer","$event","_v","_s","currentRow","currentData","filter","d","totalCites","_e","currentTableData","staticRenderFns","components","CopyRight","created","$store","dispatch","localStorage","getItem","window","addEventListener","setItem","JSON","stringify","updated","$refs","listTable","setCurrentRow","methods","val","dataList","drawRadar","results","queryString","cb","chart","showLoading","hideLoading","setOption","tooltip","series","computed","reduce","maxminData","accumulator","maxData","minData","component","eachSeriesByType","colorList","_config","__DEV__","mapDataStorage","geoJSONLoader","geoSVGLoader","loaders","svg","mapRecords","retrieveMap","record","singleSource","cloneShallow","makeInvoker","hostKey","method","zrColor","_number","isObject","CATEGORY_DEFAULT_VISUAL_INDEX","_normalizeData","normalizers","visualHandler","visualHandlers","getColorMapper","_doMap","normalizeVisualRange","preprocessForPiecewise","categories","preprocessForSpecifiedCategory","assert","mapValueToVisual","normalized","getNormalizer","makeApplyVisual","isNormalized","doMapCategory","returnRGBArray","fastLerp","parsedVisual","linear","category","piecewise","getSpecifiedVisual","fixed","doMapFixed","colorHue","makePartialColorVisualHandler","modifyHSL","colorSaturation","colorLightness","colorAlpha","modifyAlpha","makeDoMap","liftZ","symbol","getter","setter","symbolCfg","doMapToArray","pieceList","hasSpecialVisual","piece","originIndex","categoryMap","cate","visualArr","v","setVisualToOption","pop","isCategory","doNotNeedPair","applyValue","round","loop","sourceExtent","pieceIndex","findPieceIndex","item","parse","noop","littleThan","close","a","b","listVisualTypes","handler","addVisualHandler","eachVisual","context","mapVisual","isPrimary","newVisual","newVal","retrieveVisuals","hasVisual","ret","h","types","sort","type1","type2","indexOf","dependsOn","visualType1","visualType2","findClosestWhenOutside","possibleI","pieceValue","updatePossible","interval","newAbs","visualDefault","active","inactive","mapSymbolLayout","mapDataStatistic","backwardCompat","createDataSelectAction","registerLayout","registerVisual","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","registerPreprocessor","geoCoordMap","vector","matrix","Transformable","v2ApplyTransform","TransformDummy","_center","_zoom","setBoundingRect","setViewRect","_viewRect","rawTransform","centerCoord","_updateCenterAndZoom","getDefaultCenter","rawRect","cx","cy","getCenter","getRoamTransform","getLocalTransform","rawTransformMatrix","roamTransform","defaultCenter","origin","roamTransformable","copy","create","_rawTransform","invTransform","invert","getViewRect","pointToData","containPoint","targetList","_targetList","_selectTargetMap","targetMap","select","selectedMode","unSelect","toggleSelected","formatUtil","layout","extendComponentView","autoPositionValues","right","bottom","padding","normalizeCssArray","Rect","stroke","lineWidth","targetValue","visualCluster","visualObj","defaultColor","controllerVisuals","visualMapping","positionElement","getBoxLayoutParams","getWidth","getHeight","preprocessor","seriesType","actionInfos","actionInfo","idx","seriesOpt","mapLocation","ATTR","take","resourceKey","userKey","store","getStore","release","uKey","HIGH_DOWN_PROP","RECORD_VERSION_PROP","extendChartView","mapModel","_mapDraw","getComponent","_renderSymbols","originalDataIndex","circle","Circle","r","Z2_EMPHASIS_LIFT","fullData","mainSeries","fullIndex","itemModel","getItemGraphicEl","normalText","retrieve2","getFormattedLabel","emphasisText","highDownRecord","recordVersion","random","onEmphasis","onRegionHighDown","onNormal","enterRegionHighDown","toHighOrDown","extendFrom","setTextStyle","isRectText","__mapOriginalZ2","textPosition","getShallow","visualSolution","VISUAL_PRIORITY","VISUAL","COMPONENT","targetVisuals","resultVisual","mapping","createOnAllSeries","reset","resetDefines","pipelineContext","large","visualMetaList","visualMeta","concreteDim","dimInfo","getDimensionInfo","pieces","splitList","start","end","Component","registerSubTypeDefaulter","splitNumber","IRRELEVANT_EXCLUDES","targetCoordSysModel","getComponentByElement","topTarget","_parseSVG","parseSVG","makeViewBoxTransform","originRoot","buildGraphic","field","rootMap","originRootHostKey","removeKey","svgXML","ignoreViewBox","ignoreRootClip","svgWidth","svgHeight","viewBoxRect","viewBoxTransform","elRoot","setClipPath","plain","_layout","getLayoutRect","modelOption","ecSize","realIndex","paramsSet","reals","fakeValue","layoutInput","rParam","margin","batchItem","dataIndexInside","highlightKey","processedMapType","mapSymbolOffsets","subMapSeries","setItemLayout","view","previousZoom","fixX","fixY","createDimensions","List","coordDimensions","getSource","dimensionsInfo","list","initData","env","extendComponentModel","replacableOptionKeys","dataBound","ignoreSize","backgroundColor","contentColor","inactiveColor","precision","formatter","textStyle","parentModel","_dataExtent","mergeDefaultAndTheme","canvasSupported","getTargetSeriesIndices","optionSeriesIndex","seriesIndices","eachSeries","normalizeToArray","is","edgeSymbols","isMinMax","toFixed","replace","isFunction","extent","optDim","listDimensions","dimNames","dimName","isCalculationCoord","base","merge","completeSingle","defa","completeInactive","stateExist","stateAbsent","optExist","optAbsent","completeController","symbolExists","symbolSizeExists","visuals","parseFloat","resizeGeo","leftTop","rightBottom","boxLayoutOption","size","viewWidth","viewHeight","aspect","useCenterAndSize","parsePercent","viewRect","setGeoCoords","geoCreator","geoList","resize","mapModelGroupBySeries","nameMapList","singleMapSeries","mergeAll","retrieve","getFilledRegions","originRegionArr","regionsArr","registerCoordinateSystem","minSpan","maxSpan","extentSpan","restrict","handleSpan","originalDistSign","getSpanSign","extentMinSpan","realExtent","sign","currDistSign","span","dist","dataStatistics","datas","statisticType","mapKey","sum","NaN","seriesGroups","hostGeoModel","seriesList","setData"],"mappings":"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","file":"js/chunk-3de7b963.1541bd30.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar View = require(\"../View\");\n\nvar geoSourceManager = require(\"./geoSourceManager\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [Geo description]\n * For backward compatibility, the orginal interface:\n * `name, map, geoJson, specialAreas, nameMap` is kept.\n *\n * @param {string|Object} name\n * @param {string} map Map type\n *        Specify the positioned areas by left, top, width, height\n * @param {Object.<string, string>} [nameMap]\n *        Specify name alias\n * @param {boolean} [invertLongitute=true]\n */\nfunction Geo(name, map, nameMap, invertLongitute) {\n  View.call(this, name);\n  /**\n   * Map type\n   * @type {string}\n   */\n\n  this.map = map;\n  var source = geoSourceManager.load(map, nameMap);\n  this._nameCoordMap = source.nameCoordMap;\n  this._regionsMap = source.regionsMap;\n  this._invertLongitute = invertLongitute == null ? true : invertLongitute;\n  /**\n   * @readOnly\n   */\n\n  this.regions = source.regions;\n  /**\n   * @type {module:zrender/src/core/BoundingRect}\n   */\n\n  this._rect = source.boundingRect;\n}\n\nGeo.prototype = {\n  constructor: Geo,\n  type: 'geo',\n\n  /**\n   * @param {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['lng', 'lat'],\n\n  /**\n   * If contain given lng,lat coord\n   * @param {Array.<number>}\n   * @readOnly\n   */\n  containCoord: function (coord) {\n    var regions = this.regions;\n\n    for (var i = 0; i < regions.length; i++) {\n      if (regions[i].contain(coord)) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * @override\n   */\n  transformTo: function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var invertLongitute = this._invertLongitute;\n    rect = rect.clone();\n\n    if (invertLongitute) {\n      // Longitute is inverted\n      rect.y = -rect.y - rect.height;\n    }\n\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    rawTransformable.decomposeTransform();\n\n    if (invertLongitute) {\n      var scale = rawTransformable.scale;\n      scale[1] = -scale[1];\n    }\n\n    rawTransformable.updateTransform();\n\n    this._updateTransform();\n  },\n\n  /**\n   * @param {string} name\n   * @return {module:echarts/coord/geo/Region}\n   */\n  getRegion: function (name) {\n    return this._regionsMap.get(name);\n  },\n  getRegionByCoord: function (coord) {\n    var regions = this.regions;\n\n    for (var i = 0; i < regions.length; i++) {\n      if (regions[i].contain(coord)) {\n        return regions[i];\n      }\n    }\n  },\n\n  /**\n   * Add geoCoord for indexing by name\n   * @param {string} name\n   * @param {Array.<number>} geoCoord\n   */\n  addGeoCoord: function (name, geoCoord) {\n    this._nameCoordMap.set(name, geoCoord);\n  },\n\n  /**\n   * Get geoCoord by name\n   * @param {string} name\n   * @return {Array.<number>}\n   */\n  getGeoCoord: function (name) {\n    return this._nameCoordMap.get(name);\n  },\n\n  /**\n   * @override\n   */\n  getBoundingRect: function () {\n    return this._rect;\n  },\n\n  /**\n   * @param {string|Array.<number>} data\n   * @param {boolean} noRoam\n   * @param {Array.<number>} [out]\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, noRoam, out) {\n    if (typeof data === 'string') {\n      // Map area name to geoCoord\n      data = this.getGeoCoord(data);\n    }\n\n    if (data) {\n      return View.prototype.dataToPoint.call(this, data, noRoam, out);\n    }\n  },\n\n  /**\n   * @override\n   */\n  convertToPixel: zrUtil.curry(doConvert, 'dataToPoint'),\n\n  /**\n   * @override\n   */\n  convertFromPixel: zrUtil.curry(doConvert, 'pointToData')\n};\nzrUtil.mixin(Geo, View);\n\nfunction doConvert(methodName, ecModel, finder, value) {\n  var geoModel = finder.geoModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = geoModel ? geoModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem // For map.\n  || (seriesModel.getReferringComponents('geo')[0] || {}).coordinateSystem : null;\n  return coordSys === this ? coordSys[methodName](value) : null;\n}\n\nvar _default = Geo;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * For geo and graph.\n *\n * @param {Object} controllerHost\n * @param {module:zrender/Element} controllerHost.target\n */\nfunction updateViewOnPan(controllerHost, dx, dy) {\n  var target = controllerHost.target;\n  var pos = target.position;\n  pos[0] += dx;\n  pos[1] += dy;\n  target.dirty();\n}\n/**\n * For geo and graph.\n *\n * @param {Object} controllerHost\n * @param {module:zrender/Element} controllerHost.target\n * @param {number} controllerHost.zoom\n * @param {number} controllerHost.zoomLimit like: {min: 1, max: 2}\n */\n\n\nfunction updateViewOnZoom(controllerHost, zoomDelta, zoomX, zoomY) {\n  var target = controllerHost.target;\n  var zoomLimit = controllerHost.zoomLimit;\n  var pos = target.position;\n  var scale = target.scale;\n  var newZoom = controllerHost.zoom = controllerHost.zoom || 1;\n  newZoom *= zoomDelta;\n\n  if (zoomLimit) {\n    var zoomMin = zoomLimit.min || 0;\n    var zoomMax = zoomLimit.max || Infinity;\n    newZoom = Math.max(Math.min(zoomMax, newZoom), zoomMin);\n  }\n\n  var zoomScale = newZoom / controllerHost.zoom;\n  controllerHost.zoom = newZoom; // Keep the mouse center when scaling\n\n  pos[0] -= (zoomX - pos[0]) * (zoomScale - 1);\n  pos[1] -= (zoomY - pos[1]) * (zoomScale - 1);\n  scale[0] *= zoomScale;\n  scale[1] *= zoomScale;\n  target.dirty();\n}\n\nexports.updateViewOnPan = updateViewOnPan;\nexports.updateViewOnZoom = updateViewOnZoom;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar RoamController = require(\"./RoamController\");\n\nvar roamHelper = require(\"../../component/helper/roamHelper\");\n\nvar _cursorHelper = require(\"../../component/helper/cursorHelper\");\n\nvar onIrrelevantElement = _cursorHelper.onIrrelevantElement;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar geoSourceManager = require(\"../../coord/geo/geoSourceManager\");\n\nvar _component = require(\"../../util/component\");\n\nvar getUID = _component.getUID;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction getFixedItemStyle(model) {\n  var itemStyle = model.getItemStyle();\n  var areaColor = model.get('areaColor'); // If user want the color not to be changed when hover,\n  // they should both set areaColor and color to be null.\n\n  if (areaColor != null) {\n    itemStyle.fill = areaColor;\n  }\n\n  return itemStyle;\n}\n\nfunction updateMapSelectHandler(mapDraw, mapOrGeoModel, regionsGroup, api, fromView) {\n  regionsGroup.off('click');\n  regionsGroup.off('mousedown');\n\n  if (mapOrGeoModel.get('selectedMode')) {\n    regionsGroup.on('mousedown', function () {\n      mapDraw._mouseDownFlag = true;\n    });\n    regionsGroup.on('click', function (e) {\n      if (!mapDraw._mouseDownFlag) {\n        return;\n      }\n\n      mapDraw._mouseDownFlag = false;\n      var el = e.target;\n\n      while (!el.__regions) {\n        el = el.parent;\n      }\n\n      if (!el) {\n        return;\n      }\n\n      var action = {\n        type: (mapOrGeoModel.mainType === 'geo' ? 'geo' : 'map') + 'ToggleSelect',\n        batch: zrUtil.map(el.__regions, function (region) {\n          return {\n            name: region.name,\n            from: fromView.uid\n          };\n        })\n      };\n      action[mapOrGeoModel.mainType + 'Id'] = mapOrGeoModel.id;\n      api.dispatchAction(action);\n      updateMapSelected(mapOrGeoModel, regionsGroup);\n    });\n  }\n}\n\nfunction updateMapSelected(mapOrGeoModel, regionsGroup) {\n  // FIXME\n  regionsGroup.eachChild(function (otherRegionEl) {\n    zrUtil.each(otherRegionEl.__regions, function (region) {\n      otherRegionEl.trigger(mapOrGeoModel.isSelected(region.name) ? 'emphasis' : 'normal');\n    });\n  });\n}\n/**\n * @alias module:echarts/component/helper/MapDraw\n * @param {module:echarts/ExtensionAPI} api\n * @param {boolean} updateGroup\n */\n\n\nfunction MapDraw(api, updateGroup) {\n  var group = new graphic.Group();\n  /**\n   * @type {string}\n   * @private\n   */\n\n  this.uid = getUID('ec_map_draw');\n  /**\n   * @type {module:echarts/component/helper/RoamController}\n   * @private\n   */\n\n  this._controller = new RoamController(api.getZr());\n  /**\n   * @type {Object} {target, zoom, zoomLimit}\n   * @private\n   */\n\n  this._controllerHost = {\n    target: updateGroup ? group : null\n  };\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n\n  this.group = group;\n  /**\n   * @type {boolean}\n   * @private\n   */\n\n  this._updateGroup = updateGroup;\n  /**\n   * This flag is used to make sure that only one among\n   * `pan`, `zoom`, `click` can occurs, otherwise 'selected'\n   * action may be triggered when `pan`, which is unexpected.\n   * @type {booelan}\n   */\n\n  this._mouseDownFlag;\n  /**\n   * @type {string}\n   */\n\n  this._mapName;\n  /**\n   * @type {boolean}\n   */\n\n  this._initialized;\n  /**\n   * @type {module:zrender/container/Group}\n   */\n\n  group.add(this._regionsGroup = new graphic.Group());\n  /**\n   * @type {module:zrender/container/Group}\n   */\n\n  group.add(this._backgroundGroup = new graphic.Group());\n}\n\nMapDraw.prototype = {\n  constructor: MapDraw,\n  draw: function (mapOrGeoModel, ecModel, api, fromView, payload) {\n    var isGeo = mapOrGeoModel.mainType === 'geo'; // Map series has data. GEO model that controlled by map series\n    // will be assigned with map data. Other GEO model has no data.\n\n    var data = mapOrGeoModel.getData && mapOrGeoModel.getData();\n    isGeo && ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'map'\n    }, function (mapSeries) {\n      if (!data && mapSeries.getHostGeoModel() === mapOrGeoModel) {\n        data = mapSeries.getData();\n      }\n    });\n    var geo = mapOrGeoModel.coordinateSystem;\n\n    this._updateBackground(geo);\n\n    var regionsGroup = this._regionsGroup;\n    var group = this.group;\n\n    if (geo._roamTransformable.transform) {\n      group.transform = geo._roamTransformable.transform.slice();\n      group.decomposeTransform();\n    }\n\n    var scale = geo._rawTransformable.scale;\n    var position = geo._rawTransformable.position;\n    regionsGroup.removeAll();\n    var itemStyleAccessPath = ['itemStyle'];\n    var hoverItemStyleAccessPath = ['emphasis', 'itemStyle'];\n    var labelAccessPath = ['label'];\n    var hoverLabelAccessPath = ['emphasis', 'label'];\n    var nameMap = zrUtil.createHashMap();\n    zrUtil.each(geo.regions, function (region) {\n      // Consider in GeoJson properties.name may be duplicated, for example,\n      // there is multiple region named \"United Kindom\" or \"France\" (so many\n      // colonies). And it is not appropriate to merge them in geo, which\n      // will make them share the same label and bring trouble in label\n      // location calculation.\n      var regionGroup = nameMap.get(region.name) || nameMap.set(region.name, new graphic.Group());\n      var compoundPath = new graphic.CompoundPath({\n        segmentIgnoreThreshold: 1,\n        shape: {\n          paths: []\n        }\n      });\n      regionGroup.add(compoundPath);\n      var regionModel = mapOrGeoModel.getRegionModel(region.name) || mapOrGeoModel;\n      var itemStyleModel = regionModel.getModel(itemStyleAccessPath);\n      var hoverItemStyleModel = regionModel.getModel(hoverItemStyleAccessPath);\n      var itemStyle = getFixedItemStyle(itemStyleModel);\n      var hoverItemStyle = getFixedItemStyle(hoverItemStyleModel);\n      var labelModel = regionModel.getModel(labelAccessPath);\n      var hoverLabelModel = regionModel.getModel(hoverLabelAccessPath);\n      var dataIdx; // Use the itemStyle in data if has data\n\n      if (data) {\n        dataIdx = data.indexOfName(region.name); // Only visual color of each item will be used. It can be encoded by dataRange\n        // But visual color of series is used in symbol drawing\n        //\n        // Visual color for each series is for the symbol draw\n\n        var visualColor = data.getItemVisual(dataIdx, 'color', true);\n\n        if (visualColor) {\n          itemStyle.fill = visualColor;\n        }\n      }\n\n      var transformPoint = function (point) {\n        return [point[0] * scale[0] + position[0], point[1] * scale[1] + position[1]];\n      };\n\n      zrUtil.each(region.geometries, function (geometry) {\n        if (geometry.type !== 'polygon') {\n          return;\n        }\n\n        var points = [];\n\n        for (var i = 0; i < geometry.exterior.length; ++i) {\n          points.push(transformPoint(geometry.exterior[i]));\n        }\n\n        compoundPath.shape.paths.push(new graphic.Polygon({\n          segmentIgnoreThreshold: 1,\n          shape: {\n            points: points\n          }\n        }));\n\n        for (var i = 0; i < (geometry.interiors ? geometry.interiors.length : 0); ++i) {\n          var interior = geometry.interiors[i];\n          var points = [];\n\n          for (var j = 0; j < interior.length; ++j) {\n            points.push(transformPoint(interior[j]));\n          }\n\n          compoundPath.shape.paths.push(new graphic.Polygon({\n            segmentIgnoreThreshold: 1,\n            shape: {\n              points: points\n            }\n          }));\n        }\n      });\n      compoundPath.setStyle(itemStyle);\n      compoundPath.style.strokeNoScale = true;\n      compoundPath.culling = true; // Label\n\n      var showLabel = labelModel.get('show');\n      var hoverShowLabel = hoverLabelModel.get('show');\n      var isDataNaN = data && isNaN(data.get(data.mapDimension('value'), dataIdx));\n      var itemLayout = data && data.getItemLayout(dataIdx); // In the following cases label will be drawn\n      // 1. In map series and data value is NaN\n      // 2. In geo component\n      // 4. Region has no series legendSymbol, which will be add a showLabel flag in mapSymbolLayout\n\n      if (isGeo || isDataNaN && (showLabel || hoverShowLabel) || itemLayout && itemLayout.showLabel) {\n        var query = !isGeo ? dataIdx : region.name;\n        var labelFetcher; // Consider dataIdx not found.\n\n        if (!data || dataIdx >= 0) {\n          labelFetcher = mapOrGeoModel;\n        }\n\n        var textEl = new graphic.Text({\n          position: transformPoint(region.center.slice()),\n          // FIXME\n          // label rotation is not support yet in geo or regions of series-map\n          // that has no data. The rotation will be effected by this `scale`.\n          // So needed to change to RectText?\n          scale: [1 / group.scale[0], 1 / group.scale[1]],\n          z2: 10,\n          silent: true\n        });\n        graphic.setLabelStyle(textEl.style, textEl.hoverStyle = {}, labelModel, hoverLabelModel, {\n          labelFetcher: labelFetcher,\n          labelDataIndex: query,\n          defaultText: region.name,\n          useInsideStyle: false\n        }, {\n          textAlign: 'center',\n          textVerticalAlign: 'middle'\n        });\n        regionGroup.add(textEl);\n      } // setItemGraphicEl, setHoverStyle after all polygons and labels\n      // are added to the rigionGroup\n\n\n      if (data) {\n        data.setItemGraphicEl(dataIdx, regionGroup);\n      } else {\n        var regionModel = mapOrGeoModel.getRegionModel(region.name); // Package custom mouse event for geo component\n\n        compoundPath.eventData = {\n          componentType: 'geo',\n          componentIndex: mapOrGeoModel.componentIndex,\n          geoIndex: mapOrGeoModel.componentIndex,\n          name: region.name,\n          region: regionModel && regionModel.option || {}\n        };\n      }\n\n      var groupRegions = regionGroup.__regions || (regionGroup.__regions = []);\n      groupRegions.push(region);\n      regionGroup.highDownSilentOnTouch = !!mapOrGeoModel.get('selectedMode');\n      graphic.setHoverStyle(regionGroup, hoverItemStyle);\n      regionsGroup.add(regionGroup);\n    });\n\n    this._updateController(mapOrGeoModel, ecModel, api);\n\n    updateMapSelectHandler(this, mapOrGeoModel, regionsGroup, api, fromView);\n    updateMapSelected(mapOrGeoModel, regionsGroup);\n  },\n  remove: function () {\n    this._regionsGroup.removeAll();\n\n    this._backgroundGroup.removeAll();\n\n    this._controller.dispose();\n\n    this._mapName && geoSourceManager.removeGraphic(this._mapName, this.uid);\n    this._mapName = null;\n    this._controllerHost = {};\n  },\n  _updateBackground: function (geo) {\n    var mapName = geo.map;\n\n    if (this._mapName !== mapName) {\n      zrUtil.each(geoSourceManager.makeGraphic(mapName, this.uid), function (root) {\n        this._backgroundGroup.add(root);\n      }, this);\n    }\n\n    this._mapName = mapName;\n  },\n  _updateController: function (mapOrGeoModel, ecModel, api) {\n    var geo = mapOrGeoModel.coordinateSystem;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    controllerHost.zoomLimit = mapOrGeoModel.get('scaleLimit');\n    controllerHost.zoom = geo.getZoom(); // roamType is will be set default true if it is null\n\n    controller.enable(mapOrGeoModel.get('roam') || false);\n    var mainType = mapOrGeoModel.mainType;\n\n    function makeActionBase() {\n      var action = {\n        type: 'geoRoam',\n        componentType: mainType\n      };\n      action[mainType + 'Id'] = mapOrGeoModel.id;\n      return action;\n    }\n\n    controller.off('pan').on('pan', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        dx: e.dx,\n        dy: e.dy\n      }));\n    }, this);\n    controller.off('zoom').on('zoom', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      }));\n\n      if (this._updateGroup) {\n        var scale = this.group.scale;\n\n        this._regionsGroup.traverse(function (el) {\n          if (el.type === 'text') {\n            el.attr('scale', [1 / scale[0], 1 / scale[1]]);\n          }\n        });\n      }\n    }, this);\n    controller.setPointerChecker(function (e, x, y) {\n      return geo.getViewRectAfterRoam().contain(x, y) && !onIrrelevantElement(e, api, mapOrGeoModel);\n    });\n  }\n};\nvar _default = MapDraw;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar coordsOffsetMap = {\n  '': [32, 80],\n  // \n  '': [0, -10],\n  '': [10, 5],\n  '': [-10, 10],\n  //'': [-10, 0],\n  '': [5, 5]\n};\n\nfunction _default(mapType, region) {\n  if (mapType === 'china') {\n    var coordFix = coordsOffsetMap[region.name];\n\n    if (coordFix) {\n      var cp = region.center;\n      cp[0] += coordFix[0] / 10.5;\n      cp[1] += -coordFix[1] / (10.5 / 0.75);\n    }\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapping = require(\"./VisualMapping\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Visual solution, for consistent option specification.\n */\nvar each = zrUtil.each;\n\nfunction hasKeys(obj) {\n  if (obj) {\n    for (var name in obj) {\n      if (obj.hasOwnProperty(name)) {\n        return true;\n      }\n    }\n  }\n}\n/**\n * @param {Object} option\n * @param {Array.<string>} stateList\n * @param {Function} [supplementVisualOption]\n * @return {Object} visualMappings <state, <visualType, module:echarts/visual/VisualMapping>>\n */\n\n\nfunction createVisualMappings(option, stateList, supplementVisualOption) {\n  var visualMappings = {};\n  each(stateList, function (state) {\n    var mappings = visualMappings[state] = createMappings();\n    each(option[state], function (visualData, visualType) {\n      if (!VisualMapping.isValidType(visualType)) {\n        return;\n      }\n\n      var mappingOption = {\n        type: visualType,\n        visual: visualData\n      };\n      supplementVisualOption && supplementVisualOption(mappingOption, state);\n      mappings[visualType] = new VisualMapping(mappingOption); // Prepare a alpha for opacity, for some case that opacity\n      // is not supported, such as rendering using gradient color.\n\n      if (visualType === 'opacity') {\n        mappingOption = zrUtil.clone(mappingOption);\n        mappingOption.type = 'colorAlpha';\n        mappings.__hidden.__alphaForOpacity = new VisualMapping(mappingOption);\n      }\n    });\n  });\n  return visualMappings;\n\n  function createMappings() {\n    var Creater = function () {}; // Make sure hidden fields will not be visited by\n    // object iteration (with hasOwnProperty checking).\n\n\n    Creater.prototype.__hidden = Creater.prototype;\n    var obj = new Creater();\n    return obj;\n  }\n}\n/**\n * @param {Object} thisOption\n * @param {Object} newOption\n * @param {Array.<string>} keys\n */\n\n\nfunction replaceVisualOption(thisOption, newOption, keys) {\n  // Visual attributes merge is not supported, otherwise it\n  // brings overcomplicated merge logic. See #2853. So if\n  // newOption has anyone of these keys, all of these keys\n  // will be reset. Otherwise, all keys remain.\n  var has;\n  zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      has = true;\n    }\n  });\n  has && zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      thisOption[key] = zrUtil.clone(newOption[key]);\n    } else {\n      delete thisOption[key];\n    }\n  });\n}\n/**\n * @param {Array.<string>} stateList\n * @param {Object} visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\n * @param {module:echarts/data/List} list\n * @param {Function} getValueState param: valueOrIndex, return: state.\n * @param {object} [scope] Scope for getValueState\n * @param {string} [dimension] Concrete dimension, if used.\n */\n// ???! handle brush?\n\n\nfunction applyVisual(stateList, visualMappings, data, getValueState, scope, dimension) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  var dataIndex;\n\n  function getVisual(key) {\n    return data.getItemVisual(dataIndex, key);\n  }\n\n  function setVisual(key, value) {\n    data.setItemVisual(dataIndex, key, value);\n  }\n\n  if (dimension == null) {\n    data.each(eachItem);\n  } else {\n    data.each([dimension], eachItem);\n  }\n\n  function eachItem(valueOrIndex, index) {\n    dataIndex = dimension == null ? valueOrIndex : index;\n    var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n\n    if (rawDataItem && rawDataItem.visualMap === false) {\n      return;\n    }\n\n    var valueState = getValueState.call(scope, valueOrIndex);\n    var mappings = visualMappings[valueState];\n    var visualTypes = visualTypesMap[valueState];\n\n    for (var i = 0, len = visualTypes.length; i < len; i++) {\n      var type = visualTypes[i];\n      mappings[type] && mappings[type].applyVisual(valueOrIndex, getVisual, setVisual);\n    }\n  }\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {Array.<string>} stateList\n * @param {Object} visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\n * @param {Function} getValueState param: valueOrIndex, return: state.\n * @param {number} [dim] dimension or dimension index.\n */\n\n\nfunction incrementalApplyVisual(stateList, visualMappings, getValueState, dim) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n\n  function progress(params, data) {\n    if (dim != null) {\n      dim = data.getDimension(dim);\n    }\n\n    function getVisual(key) {\n      return data.getItemVisual(dataIndex, key);\n    }\n\n    function setVisual(key, value) {\n      data.setItemVisual(dataIndex, key, value);\n    }\n\n    var dataIndex;\n\n    while ((dataIndex = params.next()) != null) {\n      var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n\n      if (rawDataItem && rawDataItem.visualMap === false) {\n        continue;\n      }\n\n      var value = dim != null ? data.get(dim, dataIndex, true) : dataIndex;\n      var valueState = getValueState(value);\n      var mappings = visualMappings[valueState];\n      var visualTypes = visualTypesMap[valueState];\n\n      for (var i = 0, len = visualTypes.length; i < len; i++) {\n        var type = visualTypes[i];\n        mappings[type] && mappings[type].applyVisual(value, getVisual, setVisual);\n      }\n    }\n  }\n\n  return {\n    progress: progress\n  };\n}\n\nexports.createVisualMappings = createVisualMappings;\nexports.replaceVisualOption = replaceVisualOption;\nexports.applyVisual = applyVisual;\nexports.incrementalApplyVisual = incrementalApplyVisual;","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorldMap.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorldMap.vue?vue&type=style&index=0&lang=less&\"","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapModel = require(\"./VisualMapModel\");\n\nvar numberUtil = require(\"../../util/number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Constant\nvar DEFAULT_BAR_BOUND = [20, 140];\nvar ContinuousModel = VisualMapModel.extend({\n  type: 'visualMap.continuous',\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    align: 'auto',\n    // 'auto', 'left', 'right', 'top', 'bottom'\n    calculable: false,\n    // This prop effect default component type determine,\n    // See echarts/component/visualMap/typeDefaulter.\n    range: null,\n    // selected range. In default case `range` is [min, max]\n    // and can auto change along with modification of min max,\n    // util use specifid a range.\n    realtime: true,\n    // Whether realtime update.\n    itemHeight: null,\n    // The length of the range control edge.\n    itemWidth: null,\n    // The length of the other side.\n    hoverLink: true,\n    // Enable hover highlight.\n    hoverLinkDataSize: null,\n    // The size of hovered data.\n    hoverLinkOnHandle: null // Whether trigger hoverLink when hover handle.\n    // If not specified, follow the value of `realtime`.\n\n  },\n\n  /**\n   * @override\n   */\n  optionUpdated: function (newOption, isInit) {\n    ContinuousModel.superApply(this, 'optionUpdated', arguments);\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n\n    this._resetRange();\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  resetItemSize: function () {\n    ContinuousModel.superApply(this, 'resetItemSize', arguments);\n    var itemSize = this.itemSize;\n    this._orient === 'horizontal' && itemSize.reverse();\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  },\n\n  /**\n   * @private\n   */\n  _resetRange: function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n\n    if (!range || range.auto) {\n      // `range` should always be array (so we dont use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  completeVisualOption: function () {\n    VisualMapModel.prototype.completeVisualOption.apply(this, arguments);\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = 0; // For good looking.\n      }\n    }, this);\n  },\n\n  /**\n   * @override\n   */\n  setSelected: function (selected) {\n    this.option.range = selected.slice();\n\n    this._resetRange();\n  },\n\n  /**\n   * @public\n   */\n  getSelected: function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice()); // Clamp\n\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  },\n\n  /**\n   * @override\n   */\n  getValueState: function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent(); // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  },\n\n  /**\n   * @params {Array.<number>} range target value: range[0] <= value && value <= range[1]\n   * @return {Array.<Object>} [{seriesId, dataIndices: <Array.<number>>}, ...]\n   */\n  findTargetDataIndices: function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimension(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  },\n\n  /**\n   * @implement\n   */\n  getVisualMeta: function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    } // Format to: outOfRange -- inRange -- outOfRange.\n\n\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  }\n});\n\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  } // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n\n\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\n\nvar _default = ContinuousModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Region = require(\"../Region\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Fix for \nvar geoCoord = [126, 25];\nvar points = [[[0, 3.5], [7, 11.2], [15, 11.9], [30, 7], [42, 0.7], [52, 0.7], [56, 7.7], [59, 0.7], [64, 0.7], [64, 0], [5, 0], [0, 3.5]], [[13, 16.1], [19, 14.7], [16, 21.7], [11, 23.1], [13, 16.1]], [[12, 32.2], [14, 38.5], [15, 38.5], [13, 32.2], [12, 32.2]], [[16, 47.6], [12, 53.2], [13, 53.2], [18, 47.6], [16, 47.6]], [[6, 64.4], [8, 70], [9, 70], [8, 64.4], [6, 64.4]], [[23, 82.6], [29, 79.8], [30, 79.8], [25, 82.6], [23, 82.6]], [[37, 70.7], [43, 62.3], [44, 62.3], [39, 70.7], [37, 70.7]], [[48, 51.1], [51, 45.5], [53, 45.5], [50, 51.1], [48, 51.1]], [[51, 35], [51, 28.7], [53, 28.7], [53, 35], [51, 35]], [[52, 22.4], [55, 17.5], [56, 17.5], [53, 22.4], [52, 22.4]], [[58, 12.6], [62, 7], [63, 7], [60, 12.6], [58, 12.6]], [[0, 3.5], [0, 93.1], [64, 93.1], [64, 0], [63, 0], [63, 92.4], [1, 92.4], [1, 3.5], [0, 3.5]]];\n\nfor (var i = 0; i < points.length; i++) {\n  for (var k = 0; k < points[i].length; k++) {\n    points[i][k][0] /= 10.5;\n    points[i][k][1] /= -10.5 / 0.75;\n    points[i][k][0] += geoCoord[0];\n    points[i][k][1] += geoCoord[1];\n  }\n}\n\nfunction _default(mapType, regions) {\n  if (mapType === 'china') {\n    regions.push(new Region('', zrUtil.map(points, function (exterior) {\n      return {\n        type: 'polygon',\n        exterior: exterior\n      };\n    }), geoCoord));\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar LinearGradient = require(\"zrender/lib/graphic/LinearGradient\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar VisualMapView = require(\"./VisualMapView\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar sliderMove = require(\"../helper/sliderMove\");\n\nvar helper = require(\"./helper\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar linearMap = numberUtil.linearMap;\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max; // Arbitrary value\n\nvar HOVER_LINK_SIZE = 12;\nvar HOVER_LINK_OUT = 6; // Notice:\n// Any \"interval\" should be by the order of [low, high].\n// \"handle0\" (handleIndex === 0) maps to\n// low data value: this._dataInterval[0] and has low coord.\n// \"handle1\" (handleIndex === 1) maps to\n// high data value: this._dataInterval[1] and has high coord.\n// The logic of transform is implemented in this._createBarGroup.\n\nvar ContinuousView = VisualMapView.extend({\n  type: 'visualMap.continuous',\n\n  /**\n   * @override\n   */\n  init: function () {\n    ContinuousView.superApply(this, 'init', arguments);\n    /**\n     * @private\n     */\n\n    this._shapes = {};\n    /**\n     * @private\n     */\n\n    this._dataInterval = [];\n    /**\n     * @private\n     */\n\n    this._handleEnds = [];\n    /**\n     * @private\n     */\n\n    this._orient;\n    /**\n     * @private\n     */\n\n    this._useHandle;\n    /**\n     * @private\n     */\n\n    this._hoverLinkDataIndices = [];\n    /**\n     * @private\n     */\n\n    this._dragging;\n    /**\n     * @private\n     */\n\n    this._hovering;\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  doRender: function (visualMapModel, ecModel, api, payload) {\n    if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) {\n      this._buildView();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _buildView: function () {\n    this.group.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var thisGroup = this.group;\n    this._orient = visualMapModel.get('orient');\n    this._useHandle = visualMapModel.get('calculable');\n\n    this._resetInterval();\n\n    this._renderBar(thisGroup);\n\n    var dataRangeText = visualMapModel.get('text');\n\n    this._renderEndsText(thisGroup, dataRangeText, 0);\n\n    this._renderEndsText(thisGroup, dataRangeText, 1); // Do this for background size calculation.\n\n\n    this._updateView(true); // After updating view, inner shapes is built completely,\n    // and then background can be rendered.\n\n\n    this.renderBackground(thisGroup); // Real update view\n\n    this._updateView();\n\n    this._enableHoverLinkToSeries();\n\n    this._enableHoverLinkFromSeries();\n\n    this.positionGroup(thisGroup);\n  },\n\n  /**\n   * @private\n   */\n  _renderEndsText: function (group, dataRangeText, endsIndex) {\n    if (!dataRangeText) {\n      return;\n    } // Compatible with ec2, text[0] map to high value, text[1] map low value.\n\n\n    var text = dataRangeText[1 - endsIndex];\n    text = text != null ? text + '' : '';\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var itemSize = visualMapModel.itemSize;\n    var barGroup = this._shapes.barGroup;\n\n    var position = this._applyTransform([itemSize[0] / 2, endsIndex === 0 ? -textGap : itemSize[1] + textGap], barGroup);\n\n    var align = this._applyTransform(endsIndex === 0 ? 'bottom' : 'top', barGroup);\n\n    var orient = this._orient;\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    this.group.add(new graphic.Text({\n      style: {\n        x: position[0],\n        y: position[1],\n        textVerticalAlign: orient === 'horizontal' ? 'middle' : align,\n        textAlign: orient === 'horizontal' ? align : 'center',\n        text: text,\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    }));\n  },\n\n  /**\n   * @private\n   */\n  _renderBar: function (targetGroup) {\n    var visualMapModel = this.visualMapModel;\n    var shapes = this._shapes;\n    var itemSize = visualMapModel.itemSize;\n    var orient = this._orient;\n    var useHandle = this._useHandle;\n    var itemAlign = helper.getItemAlign(visualMapModel, this.api, itemSize);\n\n    var barGroup = shapes.barGroup = this._createBarGroup(itemAlign); // Bar\n\n\n    barGroup.add(shapes.outOfRange = createPolygon());\n    barGroup.add(shapes.inRange = createPolygon(null, useHandle ? getCursor(this._orient) : null, zrUtil.bind(this._dragHandle, this, 'all', false), zrUtil.bind(this._dragHandle, this, 'all', true)));\n    var textRect = visualMapModel.textStyleModel.getTextRect('');\n    var textSize = mathMax(textRect.width, textRect.height); // Handle\n\n    if (useHandle) {\n      shapes.handleThumbs = [];\n      shapes.handleLabels = [];\n      shapes.handleLabelPoints = [];\n\n      this._createHandle(barGroup, 0, itemSize, textSize, orient, itemAlign);\n\n      this._createHandle(barGroup, 1, itemSize, textSize, orient, itemAlign);\n    }\n\n    this._createIndicator(barGroup, itemSize, textSize, orient);\n\n    targetGroup.add(barGroup);\n  },\n\n  /**\n   * @private\n   */\n  _createHandle: function (barGroup, handleIndex, itemSize, textSize, orient) {\n    var onDrift = zrUtil.bind(this._dragHandle, this, handleIndex, false);\n    var onDragEnd = zrUtil.bind(this._dragHandle, this, handleIndex, true);\n    var handleThumb = createPolygon(createHandlePoints(handleIndex, textSize), getCursor(this._orient), onDrift, onDragEnd);\n    handleThumb.position[0] = itemSize[0];\n    barGroup.add(handleThumb); // Text is always horizontal layout but should not be effected by\n    // transform (orient/inverse). So label is built separately but not\n    // use zrender/graphic/helper/RectText, and is located based on view\n    // group (according to handleLabelPoint) but not barGroup.\n\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var handleLabel = new graphic.Text({\n      draggable: true,\n      drift: onDrift,\n      onmousemove: function (e) {\n        // Fot mobile devicem, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragend: onDragEnd,\n      style: {\n        x: 0,\n        y: 0,\n        text: '',\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    });\n    this.group.add(handleLabel);\n    var handleLabelPoint = [orient === 'horizontal' ? textSize / 2 : textSize * 1.5, orient === 'horizontal' ? handleIndex === 0 ? -(textSize * 1.5) : textSize * 1.5 : handleIndex === 0 ? -textSize / 2 : textSize / 2];\n    var shapes = this._shapes;\n    shapes.handleThumbs[handleIndex] = handleThumb;\n    shapes.handleLabelPoints[handleIndex] = handleLabelPoint;\n    shapes.handleLabels[handleIndex] = handleLabel;\n  },\n\n  /**\n   * @private\n   */\n  _createIndicator: function (barGroup, itemSize, textSize, orient) {\n    var indicator = createPolygon([[0, 0]], 'move');\n    indicator.position[0] = itemSize[0];\n    indicator.attr({\n      invisible: true,\n      silent: true\n    });\n    barGroup.add(indicator);\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var indicatorLabel = new graphic.Text({\n      silent: true,\n      invisible: true,\n      style: {\n        x: 0,\n        y: 0,\n        text: '',\n        textFont: textStyleModel.getFont(),\n        textFill: textStyleModel.getTextColor()\n      }\n    });\n    this.group.add(indicatorLabel);\n    var indicatorLabelPoint = [orient === 'horizontal' ? textSize / 2 : HOVER_LINK_OUT + 3, 0];\n    var shapes = this._shapes;\n    shapes.indicator = indicator;\n    shapes.indicatorLabel = indicatorLabel;\n    shapes.indicatorLabelPoint = indicatorLabelPoint;\n  },\n\n  /**\n   * @private\n   */\n  _dragHandle: function (handleIndex, isEnd, dx, dy) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    this._dragging = !isEnd;\n\n    if (!isEnd) {\n      // Transform dx, dy to bar coordination.\n      var vertex = this._applyTransform([dx, dy], this._shapes.barGroup, true);\n\n      this._updateInterval(handleIndex, vertex[1]); // Considering realtime, update view should be executed\n      // before dispatch action.\n\n\n      this._updateView();\n    } // dragEnd do not dispatch action when realtime.\n\n\n    if (isEnd === !this.visualMapModel.get('realtime')) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'selectDataRange',\n        from: this.uid,\n        visualMapId: this.visualMapModel.id,\n        selected: this._dataInterval.slice()\n      });\n    }\n\n    if (isEnd) {\n      !this._hovering && this._clearHoverLinkToSeries();\n    } else if (useHoverLinkOnHandle(this.visualMapModel)) {\n      this._doHoverLinkToSeries(this._handleEnds[handleIndex], false);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _resetInterval: function () {\n    var visualMapModel = this.visualMapModel;\n    var dataInterval = this._dataInterval = visualMapModel.getSelected();\n    var dataExtent = visualMapModel.getExtent();\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    this._handleEnds = [linearMap(dataInterval[0], dataExtent, sizeExtent, true), linearMap(dataInterval[1], dataExtent, sizeExtent, true)];\n  },\n\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} dx\n   * @param {number} dy\n   */\n  _updateInterval: function (handleIndex, delta) {\n    delta = delta || 0;\n    var visualMapModel = this.visualMapModel;\n    var handleEnds = this._handleEnds;\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    sliderMove(delta, handleEnds, sizeExtent, handleIndex, // cross is forbiden\n    0);\n    var dataExtent = visualMapModel.getExtent(); // Update data interval.\n\n    this._dataInterval = [linearMap(handleEnds[0], sizeExtent, dataExtent, true), linearMap(handleEnds[1], sizeExtent, dataExtent, true)];\n  },\n\n  /**\n   * @private\n   */\n  _updateView: function (forSketch) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var shapes = this._shapes;\n    var outOfRangeHandleEnds = [0, visualMapModel.itemSize[1]];\n    var inRangeHandleEnds = forSketch ? outOfRangeHandleEnds : this._handleEnds;\n\n    var visualInRange = this._createBarVisual(this._dataInterval, dataExtent, inRangeHandleEnds, 'inRange');\n\n    var visualOutOfRange = this._createBarVisual(dataExtent, dataExtent, outOfRangeHandleEnds, 'outOfRange');\n\n    shapes.inRange.setStyle({\n      fill: visualInRange.barColor,\n      opacity: visualInRange.opacity\n    }).setShape('points', visualInRange.barPoints);\n    shapes.outOfRange.setStyle({\n      fill: visualOutOfRange.barColor,\n      opacity: visualOutOfRange.opacity\n    }).setShape('points', visualOutOfRange.barPoints);\n\n    this._updateHandle(inRangeHandleEnds, visualInRange);\n  },\n\n  /**\n   * @private\n   */\n  _createBarVisual: function (dataInterval, dataExtent, handleEnds, forceState) {\n    var opts = {\n      forceState: forceState,\n      convertOpacityToAlpha: true\n    };\n\n    var colorStops = this._makeColorGradient(dataInterval, opts);\n\n    var symbolSizes = [this.getControllerVisual(dataInterval[0], 'symbolSize', opts), this.getControllerVisual(dataInterval[1], 'symbolSize', opts)];\n\n    var barPoints = this._createBarPoints(handleEnds, symbolSizes);\n\n    return {\n      barColor: new LinearGradient(0, 0, 0, 1, colorStops),\n      barPoints: barPoints,\n      handlesColor: [colorStops[0].color, colorStops[colorStops.length - 1].color]\n    };\n  },\n\n  /**\n   * @private\n   */\n  _makeColorGradient: function (dataInterval, opts) {\n    // Considering colorHue, which is not linear, so we have to sample\n    // to calculate gradient color stops, but not only caculate head\n    // and tail.\n    var sampleNumber = 100; // Arbitrary value.\n\n    var colorStops = [];\n    var step = (dataInterval[1] - dataInterval[0]) / sampleNumber;\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[0], 'color', opts),\n      offset: 0\n    });\n\n    for (var i = 1; i < sampleNumber; i++) {\n      var currValue = dataInterval[0] + step * i;\n\n      if (currValue > dataInterval[1]) {\n        break;\n      }\n\n      colorStops.push({\n        color: this.getControllerVisual(currValue, 'color', opts),\n        offset: i / sampleNumber\n      });\n    }\n\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[1], 'color', opts),\n      offset: 1\n    });\n    return colorStops;\n  },\n\n  /**\n   * @private\n   */\n  _createBarPoints: function (handleEnds, symbolSizes) {\n    var itemSize = this.visualMapModel.itemSize;\n    return [[itemSize[0] - symbolSizes[0], handleEnds[0]], [itemSize[0], handleEnds[0]], [itemSize[0], handleEnds[1]], [itemSize[0] - symbolSizes[1], handleEnds[1]]];\n  },\n\n  /**\n   * @private\n   */\n  _createBarGroup: function (itemAlign) {\n    var orient = this._orient;\n    var inverse = this.visualMapModel.get('inverse');\n    return new graphic.Group(orient === 'horizontal' && !inverse ? {\n      scale: itemAlign === 'bottom' ? [1, 1] : [-1, 1],\n      rotation: Math.PI / 2\n    } : orient === 'horizontal' && inverse ? {\n      scale: itemAlign === 'bottom' ? [-1, 1] : [1, 1],\n      rotation: -Math.PI / 2\n    } : orient === 'vertical' && !inverse ? {\n      scale: itemAlign === 'left' ? [1, -1] : [-1, -1]\n    } : {\n      scale: itemAlign === 'left' ? [1, 1] : [-1, 1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _updateHandle: function (handleEnds, visualInRange) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    var shapes = this._shapes;\n    var visualMapModel = this.visualMapModel;\n    var handleThumbs = shapes.handleThumbs;\n    var handleLabels = shapes.handleLabels;\n    each([0, 1], function (handleIndex) {\n      var handleThumb = handleThumbs[handleIndex];\n      handleThumb.setStyle('fill', visualInRange.handlesColor[handleIndex]);\n      handleThumb.position[1] = handleEnds[handleIndex]; // Update handle label position.\n\n      var textPoint = graphic.applyTransform(shapes.handleLabelPoints[handleIndex], graphic.getTransform(handleThumb, this.group));\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        text: visualMapModel.formatValueText(this._dataInterval[handleIndex]),\n        textVerticalAlign: 'middle',\n        textAlign: this._applyTransform(this._orient === 'horizontal' ? handleIndex === 0 ? 'bottom' : 'top' : 'left', shapes.barGroup)\n      });\n    }, this);\n  },\n\n  /**\n   * @private\n   * @param {number} cursorValue\n   * @param {number} textValue\n   * @param {string} [rangeSymbol]\n   * @param {number} [halfHoverLinkSize]\n   */\n  _showIndicator: function (cursorValue, textValue, rangeSymbol, halfHoverLinkSize) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var itemSize = visualMapModel.itemSize;\n    var sizeExtent = [0, itemSize[1]];\n    var pos = linearMap(cursorValue, dataExtent, sizeExtent, true);\n    var shapes = this._shapes;\n    var indicator = shapes.indicator;\n\n    if (!indicator) {\n      return;\n    }\n\n    indicator.position[1] = pos;\n    indicator.attr('invisible', false);\n    indicator.setShape('points', createIndicatorPoints(!!rangeSymbol, halfHoverLinkSize, pos, itemSize[1]));\n    var opts = {\n      convertOpacityToAlpha: true\n    };\n    var color = this.getControllerVisual(cursorValue, 'color', opts);\n    indicator.setStyle('fill', color); // Update handle label position.\n\n    var textPoint = graphic.applyTransform(shapes.indicatorLabelPoint, graphic.getTransform(indicator, this.group));\n    var indicatorLabel = shapes.indicatorLabel;\n    indicatorLabel.attr('invisible', false);\n\n    var align = this._applyTransform('left', shapes.barGroup);\n\n    var orient = this._orient;\n    indicatorLabel.setStyle({\n      text: (rangeSymbol ? rangeSymbol : '') + visualMapModel.formatValueText(textValue),\n      textVerticalAlign: orient === 'horizontal' ? align : 'middle',\n      textAlign: orient === 'horizontal' ? 'center' : align,\n      x: textPoint[0],\n      y: textPoint[1]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLinkToSeries: function () {\n    var self = this;\n\n    this._shapes.barGroup.on('mousemove', function (e) {\n      self._hovering = true;\n\n      if (!self._dragging) {\n        var itemSize = self.visualMapModel.itemSize;\n\n        var pos = self._applyTransform([e.offsetX, e.offsetY], self._shapes.barGroup, true, true); // For hover link show when hover handle, which might be\n        // below or upper than sizeExtent.\n\n\n        pos[1] = mathMin(mathMax(0, pos[1]), itemSize[1]);\n\n        self._doHoverLinkToSeries(pos[1], 0 <= pos[0] && pos[0] <= itemSize[0]);\n      }\n    }).on('mouseout', function () {\n      // When mouse is out of handle, hoverLink still need\n      // to be displayed when realtime is set as false.\n      self._hovering = false;\n      !self._dragging && self._clearHoverLinkToSeries();\n    });\n  },\n\n  /**\n   * @private\n   */\n  _enableHoverLinkFromSeries: function () {\n    var zr = this.api.getZr();\n\n    if (this.visualMapModel.option.hoverLink) {\n      zr.on('mouseover', this._hoverLinkFromSeriesMouseOver, this);\n      zr.on('mouseout', this._hideIndicator, this);\n    } else {\n      this._clearHoverLinkFromSeries();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _doHoverLinkToSeries: function (cursorPos, hoverOnBar) {\n    var visualMapModel = this.visualMapModel;\n    var itemSize = visualMapModel.itemSize;\n\n    if (!visualMapModel.option.hoverLink) {\n      return;\n    }\n\n    var sizeExtent = [0, itemSize[1]];\n    var dataExtent = visualMapModel.getExtent(); // For hover link show when hover handle, which might be below or upper than sizeExtent.\n\n    cursorPos = mathMin(mathMax(sizeExtent[0], cursorPos), sizeExtent[1]);\n    var halfHoverLinkSize = getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent);\n    var hoverRange = [cursorPos - halfHoverLinkSize, cursorPos + halfHoverLinkSize];\n    var cursorValue = linearMap(cursorPos, sizeExtent, dataExtent, true);\n    var valueRange = [linearMap(hoverRange[0], sizeExtent, dataExtent, true), linearMap(hoverRange[1], sizeExtent, dataExtent, true)]; // Consider data range is out of visualMap range, see test/visualMap-continuous.html,\n    // where china and india has very large population.\n\n    hoverRange[0] < sizeExtent[0] && (valueRange[0] = -Infinity);\n    hoverRange[1] > sizeExtent[1] && (valueRange[1] = Infinity); // Do not show indicator when mouse is over handle,\n    // otherwise labels overlap, especially when dragging.\n\n    if (hoverOnBar) {\n      if (valueRange[0] === -Infinity) {\n        this._showIndicator(cursorValue, valueRange[1], '< ', halfHoverLinkSize);\n      } else if (valueRange[1] === Infinity) {\n        this._showIndicator(cursorValue, valueRange[0], '> ', halfHoverLinkSize);\n      } else {\n        this._showIndicator(cursorValue, cursorValue, ' ', halfHoverLinkSize);\n      }\n    } // When realtime is set as false, handles, which are in barGroup,\n    // also trigger hoverLink, which help user to realize where they\n    // focus on when dragging. (see test/heatmap-large.html)\n    // When realtime is set as true, highlight will not show when hover\n    // handle, because the label on handle, which displays a exact value\n    // but not range, might mislead users.\n\n\n    var oldBatch = this._hoverLinkDataIndices;\n    var newBatch = [];\n\n    if (hoverOnBar || useHoverLinkOnHandle(visualMapModel)) {\n      newBatch = this._hoverLinkDataIndices = visualMapModel.findTargetDataIndices(valueRange);\n    }\n\n    var resultBatches = modelUtil.compressBatches(oldBatch, newBatch);\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(resultBatches[0], visualMapModel));\n\n    this._dispatchHighDown('highlight', helper.makeHighDownBatch(resultBatches[1], visualMapModel));\n  },\n\n  /**\n   * @private\n   */\n  _hoverLinkFromSeriesMouseOver: function (e) {\n    var el = e.target;\n    var visualMapModel = this.visualMapModel;\n\n    if (!el || el.dataIndex == null) {\n      return;\n    }\n\n    var dataModel = this.ecModel.getSeriesByIndex(el.seriesIndex);\n\n    if (!visualMapModel.isTargetSeries(dataModel)) {\n      return;\n    }\n\n    var data = dataModel.getData(el.dataType);\n    var value = data.get(visualMapModel.getDataDimension(data), el.dataIndex, true);\n\n    if (!isNaN(value)) {\n      this._showIndicator(value, value);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _hideIndicator: function () {\n    var shapes = this._shapes;\n    shapes.indicator && shapes.indicator.attr('invisible', true);\n    shapes.indicatorLabel && shapes.indicatorLabel.attr('invisible', true);\n  },\n\n  /**\n   * @private\n   */\n  _clearHoverLinkToSeries: function () {\n    this._hideIndicator();\n\n    var indices = this._hoverLinkDataIndices;\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(indices, this.visualMapModel));\n\n    indices.length = 0;\n  },\n\n  /**\n   * @private\n   */\n  _clearHoverLinkFromSeries: function () {\n    this._hideIndicator();\n\n    var zr = this.api.getZr();\n    zr.off('mouseover', this._hoverLinkFromSeriesMouseOver);\n    zr.off('mouseout', this._hideIndicator);\n  },\n\n  /**\n   * @private\n   */\n  _applyTransform: function (vertex, element, inverse, global) {\n    var transform = graphic.getTransform(element, global ? null : this.group);\n    return graphic[zrUtil.isArray(vertex) ? 'applyTransform' : 'transformDirection'](vertex, transform, inverse);\n  },\n\n  /**\n   * @private\n   */\n  _dispatchHighDown: function (type, batch) {\n    batch && batch.length && this.api.dispatchAction({\n      type: type,\n      batch: batch\n    });\n  },\n\n  /**\n   * @override\n   */\n  dispose: function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  }\n});\n\nfunction createPolygon(points, cursor, onDrift, onDragEnd) {\n  return new graphic.Polygon({\n    shape: {\n      points: points\n    },\n    draggable: !!onDrift,\n    cursor: cursor,\n    drift: onDrift,\n    onmousemove: function (e) {\n      // Fot mobile devicem, prevent screen slider on the button.\n      eventTool.stop(e.event);\n    },\n    ondragend: onDragEnd\n  });\n}\n\nfunction createHandlePoints(handleIndex, textSize) {\n  return handleIndex === 0 ? [[0, 0], [textSize, 0], [textSize, -textSize]] : [[0, 0], [textSize, 0], [textSize, textSize]];\n}\n\nfunction createIndicatorPoints(isRange, halfHoverLinkSize, pos, extentMax) {\n  return isRange ? [// indicate range\n  [0, -mathMin(halfHoverLinkSize, mathMax(pos, 0))], [HOVER_LINK_OUT, 0], [0, mathMin(halfHoverLinkSize, mathMax(extentMax - pos, 0))]] : [// indicate single value\n  [0, 0], [5, -5], [5, 5]];\n}\n\nfunction getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent) {\n  var halfHoverLinkSize = HOVER_LINK_SIZE / 2;\n  var hoverLinkDataSize = visualMapModel.get('hoverLinkDataSize');\n\n  if (hoverLinkDataSize) {\n    halfHoverLinkSize = linearMap(hoverLinkDataSize, dataExtent, sizeExtent, true) / 2;\n  }\n\n  return halfHoverLinkSize;\n}\n\nfunction useHoverLinkOnHandle(visualMapModel) {\n  var hoverLinkOnHandle = visualMapModel.get('hoverLinkOnHandle');\n  return !!(hoverLinkOnHandle == null ? visualMapModel.get('realtime') : hoverLinkOnHandle);\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nvar _default = ContinuousView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _roamHelper = require(\"./roamHelper\");\n\nvar updateCenterAndZoom = _roamHelper.updateCenterAndZoom;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @payload\n * @property {string} [componentType=series]\n * @property {number} [dx]\n * @property {number} [dy]\n * @property {number} [zoom]\n * @property {number} [originX]\n * @property {number} [originY]\n */\necharts.registerAction({\n  type: 'geoRoam',\n  event: 'geoRoam',\n  update: 'updateTransform'\n}, function (payload, ecModel) {\n  var componentType = payload.componentType || 'series';\n  ecModel.eachComponent({\n    mainType: componentType,\n    query: payload\n  }, function (componentModel) {\n    var geo = componentModel.coordinateSystem;\n\n    if (geo.type !== 'geo') {\n      return;\n    }\n\n    var res = updateCenterAndZoom(geo, payload, componentModel.get('scaleLimit'));\n    componentModel.setCenter && componentModel.setCenter(res.center);\n    componentModel.setZoom && componentModel.setZoom(res.zoom); // All map series with same `map` use the same geo coordinate system\n    // So the center and zoom must be in sync. Include the series not selected by legend\n\n    if (componentType === 'series') {\n      zrUtil.each(componentModel.seriesGroup, function (seriesModel) {\n        seriesModel.setCenter(res.center);\n        seriesModel.setZoom(res.zoom);\n      });\n    }\n  });\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Eventful = require(\"zrender/lib/mixin/Eventful\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar interactionMutex = require(\"./interactionMutex\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @alias module:echarts/component/helper/RoamController\n * @constructor\n * @mixin {module:zrender/mixin/Eventful}\n *\n * @param {module:zrender/zrender~ZRender} zr\n */\nfunction RoamController(zr) {\n  /**\n   * @type {Function}\n   */\n  this.pointerChecker;\n  /**\n   * @type {module:zrender}\n   */\n\n  this._zr = zr;\n  /**\n   * @type {Object}\n   */\n\n  this._opt = {}; // Avoid two roamController bind the same handler\n\n  var bind = zrUtil.bind;\n  var mousedownHandler = bind(mousedown, this);\n  var mousemoveHandler = bind(mousemove, this);\n  var mouseupHandler = bind(mouseup, this);\n  var mousewheelHandler = bind(mousewheel, this);\n  var pinchHandler = bind(pinch, this);\n  Eventful.call(this);\n  /**\n   * @param {Function} pointerChecker\n   *                   input: x, y\n   *                   output: boolean\n   */\n\n  this.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n  /**\n   * Notice: only enable needed types. For example, if 'zoom'\n   * is not needed, 'zoom' should not be enabled, otherwise\n   * default mousewheel behaviour (scroll page) will be disabled.\n   *\n   * @param  {boolean|string} [controlType=true] Specify the control type,\n   *                          which can be null/undefined or true/false\n   *                          or 'pan/move' or 'zoom'/'scale'\n   * @param {Object} [opt]\n   * @param {Object} [opt.zoomOnMouseWheel=true] The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n   * @param {Object} [opt.moveOnMouseMove=true] The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n   * @param {Object} [opt.moveOnMouseWheel=false] The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n   * @param {Object} [opt.preventDefaultMouseMove=true] When pan.\n   */\n\n\n  this.enable = function (controlType, opt) {\n    // Disable previous first\n    this.disable();\n    this._opt = zrUtil.defaults(zrUtil.clone(opt) || {}, {\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      // By default, wheel do not trigger move.\n      moveOnMouseWheel: false,\n      preventDefaultMouseMove: true\n    });\n\n    if (controlType == null) {\n      controlType = true;\n    }\n\n    if (controlType === true || controlType === 'move' || controlType === 'pan') {\n      zr.on('mousedown', mousedownHandler);\n      zr.on('mousemove', mousemoveHandler);\n      zr.on('mouseup', mouseupHandler);\n    }\n\n    if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n      zr.on('mousewheel', mousewheelHandler);\n      zr.on('pinch', pinchHandler);\n    }\n  };\n\n  this.disable = function () {\n    zr.off('mousedown', mousedownHandler);\n    zr.off('mousemove', mousemoveHandler);\n    zr.off('mouseup', mouseupHandler);\n    zr.off('mousewheel', mousewheelHandler);\n    zr.off('pinch', pinchHandler);\n  };\n\n  this.dispose = this.disable;\n\n  this.isDragging = function () {\n    return this._dragging;\n  };\n\n  this.isPinching = function () {\n    return this._pinching;\n  };\n}\n\nzrUtil.mixin(RoamController, Eventful);\n\nfunction mousedown(e) {\n  if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || e.target && e.target.draggable) {\n    return;\n  }\n\n  var x = e.offsetX;\n  var y = e.offsetY; // Only check on mosedown, but not mousemove.\n  // Mouse can be out of target when mouse moving.\n\n  if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n    this._x = x;\n    this._y = y;\n    this._dragging = true;\n  }\n}\n\nfunction mousemove(e) {\n  if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n    return;\n  }\n\n  var x = e.offsetX;\n  var y = e.offsetY;\n  var oldX = this._x;\n  var oldY = this._y;\n  var dx = x - oldX;\n  var dy = y - oldY;\n  this._x = x;\n  this._y = y;\n  this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n  trigger(this, 'pan', 'moveOnMouseMove', e, {\n    dx: dx,\n    dy: dy,\n    oldX: oldX,\n    oldY: oldY,\n    newX: x,\n    newY: y\n  });\n}\n\nfunction mouseup(e) {\n  if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n    this._dragging = false;\n  }\n}\n\nfunction mousewheel(e) {\n  var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n  var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n  var wheelDelta = e.wheelDelta;\n  var absWheelDeltaDelta = Math.abs(wheelDelta);\n  var originX = e.offsetX;\n  var originY = e.offsetY; // wheelDelta maybe -0 in chrome mac.\n\n  if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n    return;\n  } // If both `shouldZoom` and `shouldMove` is true, trigger\n  // their event both, and the final behavior is determined\n  // by event listener themselves.\n\n\n  if (shouldZoom) {\n    // Convenience:\n    // Mac and VM Windows on Mac: scroll up: zoom out.\n    // Windows: scroll up: zoom in.\n    // FIXME: Should do more test in different environment.\n    // wheelDelta is too complicated in difference nvironment\n    // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n    // although it has been normallized by zrender.\n    // wheelDelta of mouse wheel is bigger than touch pad.\n    var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n    var scale = wheelDelta > 0 ? factor : 1 / factor;\n    checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n      scale: scale,\n      originX: originX,\n      originY: originY\n    });\n  }\n\n  if (shouldMove) {\n    // FIXME: Should do more test in different environment.\n    var absDelta = Math.abs(wheelDelta); // wheelDelta of mouse wheel is bigger than touch pad.\n\n    var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n    checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n      scrollDelta: scrollDelta,\n      originX: originX,\n      originY: originY\n    });\n  }\n}\n\nfunction pinch(e) {\n  if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n    return;\n  }\n\n  var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n  checkPointerAndTrigger(this, 'zoom', null, e, {\n    scale: scale,\n    originX: e.pinchX,\n    originY: e.pinchY\n  });\n}\n\nfunction checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n  }\n}\n\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = zrUtil.bind(isAvailableBehavior, null, behaviorToCheck, e);\n  controller.trigger(eventName, contollerEvent);\n} // settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n\n\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!zrUtil.isString(setting) || e.event[setting + 'Key']);\n}\n\nvar _default = RoamController;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\n\nvar parseGeoJson = require(\"./parseGeoJson\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar fixNanhai = require(\"./fix/nanhai\");\n\nvar fixTextCoord = require(\"./fix/textCoord\");\n\nvar fixGeoCoord = require(\"./fix/geoCoord\");\n\nvar fixDiaoyuIsland = require(\"./fix/diaoyuIsland\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Built-in GEO fixer.\nvar inner = makeInner();\nvar _default = {\n  /**\n   * @param {string} mapName\n   * @param {Object} mapRecord {specialAreas, geoJSON}\n   * @return {Object} {regions, boundingRect}\n   */\n  load: function (mapName, mapRecord) {\n    var parsed = inner(mapRecord).parsed;\n\n    if (parsed) {\n      return parsed;\n    }\n\n    var specialAreas = mapRecord.specialAreas || {};\n    var geoJSON = mapRecord.geoJSON;\n    var regions; // https://jsperf.com/try-catch-performance-overhead\n\n    try {\n      regions = geoJSON ? parseGeoJson(geoJSON) : [];\n    } catch (e) {\n      throw new Error('Invalid geoJson format\\n' + e.message);\n    }\n\n    each(regions, function (region) {\n      var regionName = region.name;\n      fixTextCoord(mapName, region);\n      fixGeoCoord(mapName, region);\n      fixDiaoyuIsland(mapName, region); // Some area like Alaska in USA map needs to be tansformed\n      // to look better\n\n      var specialArea = specialAreas[regionName];\n\n      if (specialArea) {\n        region.transformTo(specialArea.left, specialArea.top, specialArea.width, specialArea.height);\n      }\n    });\n    fixNanhai(mapName, regions);\n    return inner(mapRecord).parsed = {\n      regions: regions,\n      boundingRect: getBoundingRect(regions)\n    };\n  }\n};\n\nfunction getBoundingRect(regions) {\n  var rect;\n\n  for (var i = 0; i < regions.length; i++) {\n    var regionRect = regions[i].getBoundingRect();\n    rect = rect || regionRect.clone();\n    rect.union(regionRect);\n  }\n\n  return rect;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar createListSimply = require(\"../helper/createListSimply\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\nvar addCommas = _format.addCommas;\n\nvar dataSelectableMixin = require(\"../../component/helper/selectableMixin\");\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawAttr = _dataProvider.retrieveRawAttr;\n\nvar geoSourceManager = require(\"../../coord/geo/geoSourceManager\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar MapSeries = SeriesModel.extend({\n  type: 'series.map',\n  dependencies: ['geo'],\n  layoutMode: 'box',\n\n  /**\n   * Only first map series of same mapType will drawMap\n   * @type {boolean}\n   */\n  needsDrawMap: false,\n\n  /**\n   * Group of all map series with same mapType\n   * @type {boolean}\n   */\n  seriesGroup: [],\n  getInitialData: function (option) {\n    var data = createListSimply(this, ['value']);\n    var valueDim = data.mapDimension('value');\n    var dataNameMap = zrUtil.createHashMap();\n    var selectTargetList = [];\n    var toAppendNames = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      var name = data.getName(i);\n      dataNameMap.set(name, true);\n      selectTargetList.push({\n        name: name,\n        value: data.get(valueDim, i),\n        selected: retrieveRawAttr(data, i, 'selected')\n      });\n    }\n\n    var geoSource = geoSourceManager.load(this.getMapType(), this.option.nameMap);\n    zrUtil.each(geoSource.regions, function (region) {\n      var name = region.name;\n\n      if (!dataNameMap.get(name)) {\n        selectTargetList.push({\n          name: name\n        });\n        toAppendNames.push(name);\n      }\n    });\n    this.updateSelectedMap(selectTargetList); // Complete data with missing regions. The consequent processes (like visual\n    // map and render) can not be performed without a \"full data\". For example,\n    // find `dataIndex` by name.\n\n    data.appendValues([], toAppendNames);\n    return data;\n  },\n\n  /**\n   * If no host geo model, return null, which means using a\n   * inner exclusive geo model.\n   */\n  getHostGeoModel: function () {\n    var geoIndex = this.option.geoIndex;\n    return geoIndex != null ? this.dependentModels.geo[geoIndex] : null;\n  },\n  getMapType: function () {\n    return (this.getHostGeoModel() || this).option.map;\n  },\n  // _fillOption: function (option, mapName) {\n  // Shallow clone\n  // option = zrUtil.extend({}, option);\n  // option.data = geoCreator.getFilledRegions(option.data, mapName, option.nameMap);\n  // return option;\n  // },\n  getRawValue: function (dataIndex) {\n    // Use value stored in data instead because it is calculated from multiple series\n    // FIXME Provide all value of multiple series ?\n    var data = this.getData();\n    return data.get(data.mapDimension('value'), dataIndex);\n  },\n\n  /**\n   * Get model of region\n   * @param  {string} name\n   * @return {module:echarts/model/Model}\n   */\n  getRegionModel: function (regionName) {\n    var data = this.getData();\n    return data.getItemModel(data.indexOfName(regionName));\n  },\n\n  /**\n   * Map tooltip formatter\n   *\n   * @param {number} dataIndex\n   */\n  formatTooltip: function (dataIndex) {\n    // FIXME orignalData and data is a bit confusing\n    var data = this.getData();\n    var formattedValue = addCommas(this.getRawValue(dataIndex));\n    var name = data.getName(dataIndex);\n    var seriesGroup = this.seriesGroup;\n    var seriesNames = [];\n\n    for (var i = 0; i < seriesGroup.length; i++) {\n      var otherIndex = seriesGroup[i].originalData.indexOfName(name);\n      var valueDim = data.mapDimension('value');\n\n      if (!isNaN(seriesGroup[i].originalData.get(valueDim, otherIndex))) {\n        seriesNames.push(encodeHTML(seriesGroup[i].name));\n      }\n    }\n\n    return seriesNames.join(', ') + '<br />' + encodeHTML(name + ' : ' + formattedValue);\n  },\n\n  /**\n   * @implement\n   */\n  getTooltipPosition: function (dataIndex) {\n    if (dataIndex != null) {\n      var name = this.getData().getName(dataIndex);\n      var geo = this.coordinateSystem;\n      var region = geo.getRegion(name);\n      return region && geo.dataToPoint(region.center);\n    }\n  },\n  setZoom: function (zoom) {\n    this.option.zoom = zoom;\n  },\n  setCenter: function (center) {\n    this.option.center = center;\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 2,\n    coordinateSystem: 'geo',\n    // map should be explicitly specified since ec3.\n    map: '',\n    // If `geoIndex` is not specified, a exclusive geo will be\n    // created. Otherwise use the specified geo component, and\n    // `map` and `mapType` are ignored.\n    // geoIndex: 0,\n    // 'center' | 'left' | 'right' | 'x%' | {number}\n    left: 'center',\n    // 'center' | 'top' | 'bottom' | 'x%' | {number}\n    top: 'center',\n    // right\n    // bottom\n    // width:\n    // height\n    // Aspect is width / height. Inited to be geoJson bbox aspect\n    // This parameter is used for scale this aspect\n    aspectScale: 0.75,\n    ///// Layout with center and size\n    // If you wan't to put map in a fixed size box with right aspect ratio\n    // This two properties may more conveninet\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    // \n    // 'sum' | 'average' | 'max' | 'min'\n    // mapValueCalculation: 'sum',\n    // \n    // mapValuePrecision: 0,\n    // \n    showLegendSymbol: true,\n    // singlemultiple\n    // selectedMode: false,\n    dataRangeHoverLink: true,\n    // \n    // roam: false,\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ],\n    // higher priority than center and zoom\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    label: {\n      show: false,\n      color: '#000'\n    },\n    // scaleLimit: null,\n    itemStyle: {\n      borderWidth: 0.5,\n      borderColor: '#444',\n      areaColor: '#eee'\n    },\n    emphasis: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        areaColor: 'rgba(255,215,0,0.8)'\n      }\n    }\n  }\n});\nzrUtil.mixin(MapSeries, dataSelectableMixin);\nvar _default = MapSeries;\nmodule.exports = _default;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"module\"},[_c('el-button',{staticClass:\"hidden-lg-and-up\",class:[_vm.unfold?'unfold':'fold'],staticStyle:{\"padding\":\"10px 12px\",\"font-size\":\"20px\"},attrs:{\"type\":\"primary\",\"icon\":_vm.unfold?'el-icon-s-unfold':'el-icon-s-fold',\"plain\":\"\"},on:{\"click\":_vm.selectUnfold}}),_c('el-container',[_c('el-aside',{staticClass:\"hidden-md-and-down\"},[_c('el-autocomplete',{staticClass:\"inline-input\",attrs:{\"placeholder\":\"\",\"prefix-icon\":\"el-icon-search\",\"fetch-suggestions\":_vm.querySearch},on:{\"select\":_vm.handleSelect},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('el-table',{ref:\"listTable\",attrs:{\"data\":_vm.nameList,\"highlight-current-row\":\"\",\"height\":\"calc(100vh - 60px)\"},on:{\"current-change\":_vm.handleCurrentChange}},[_c('el-table-column',{attrs:{\"property\":\"value\",\"label\":\"\",\"align\":\"center\",\"sortable\":\"\"}})],1)],1),_c('el-drawer',{staticClass:\"hidden-lg-and-up\",attrs:{\"visible\":_vm.elDrawer,\"direction\":\"ltr\",\"title\":\"\",\"show-close\":false,\"wrapperClosable\":false,\"id\":\"drawer\",\"size\":\"320px\"},on:{\"update:visible\":function($event){_vm.elDrawer=$event}}},[_c('el-autocomplete',{staticClass:\"inline-input\",staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"\",\"prefix-icon\":\"el-icon-search\",\"fetch-suggestions\":_vm.querySearch},on:{\"select\":_vm.handleSelect},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('el-table',{ref:\"listTable\",attrs:{\"data\":_vm.nameList,\"highlight-current-row\":\"\",\"height\":\"calc(100vh - 45px)\"},on:{\"current-change\":_vm.handleCurrentChange}},[_c('el-table-column',{attrs:{\"property\":\"value\",\"label\":\"\",\"align\":\"center\",\"sortable\":\"\"}})],1)],1),_c('el-container',[_c('el-header',{attrs:{\"height\":\"auto\"}},[(_vm.currentRow)?_c('el-row',[_c('el-col',{attrs:{\"lg\":8,\"xs\":24}},[_c('h2',[_vm._v(_vm._s(_vm.currentRow.value))])]),_c('el-col',{attrs:{\"lg\":8,\"xs\":24}},[_c('span',[_vm._v(\"\\n              \\n              \"),_c('br'),_c('strong',[_vm._v(_vm._s(_vm.currentData.slice(1).filter(function (d){ return d!==0; }).length))])])]),_c('el-col',{attrs:{\"lg\":8,\"xs\":24}},[_c('span',[_vm._v(\"\\n              \\n              \"),_c('br'),_c('strong',[_vm._v(_vm._s(_vm.totalCites))])])])],1):_vm._e()],1),_c('el-main',[_c('div',{attrs:{\"id\":\"canvas\"}})]),_c('el-footer',{attrs:{\"height\":\"auto\"}},[_c('el-table',{ref:\"indexTable\",attrs:{\"data\":_vm.currentTableData,\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"property\":\"indicatorName\",\"label\":\"\",\"align\":\"left\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"property\":\"indicatorValue\",\"label\":\"\",\"align\":\"center\",\"sortable\":\"\"}})],1)],1),_c('CopyRight')],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"module\">\r\n    <el-button\r\n      type=\"primary\"\r\n      :icon=\"unfold?'el-icon-s-unfold':'el-icon-s-fold'\"\r\n      plain\r\n      style=\"padding:10px 12px;font-size:20px\"\r\n      class=\"hidden-lg-and-up\"\r\n      :class=\"[unfold?'unfold':'fold']\"\r\n      @click=\"selectUnfold\"\r\n    ></el-button>\r\n    <el-container>\r\n      <el-aside class=\"hidden-md-and-down\">\r\n        <el-autocomplete\r\n          class=\"inline-input\"\r\n          placeholder=\"\"\r\n          prefix-icon=\"el-icon-search\"\r\n          :fetch-suggestions=\"querySearch\"\r\n          v-model=\"name\"\r\n          @select=\"handleSelect\"\r\n        ></el-autocomplete>\r\n        <el-table\r\n          ref=\"listTable\"\r\n          :data=\"nameList\"\r\n          highlight-current-row\r\n          height=\"calc(100vh - 60px)\"\r\n          @current-change=\"handleCurrentChange\"\r\n        >\r\n          <el-table-column property=\"value\" label=\"\" align=\"center\" sortable></el-table-column>\r\n        </el-table>\r\n      </el-aside>\r\n      <el-drawer\r\n        :visible.sync=\"elDrawer\"\r\n        direction=\"ltr\"\r\n        title=\"\"\r\n        :show-close=\"false\"\r\n        :wrapperClosable=\"false\"\r\n        class=\"hidden-lg-and-up\"\r\n        id=\"drawer\"\r\n        size = \"320px\"\r\n      >\r\n        <el-autocomplete\r\n          class=\"inline-input\"\r\n          placeholder=\"\"\r\n          prefix-icon=\"el-icon-search\"\r\n          :fetch-suggestions=\"querySearch\"\r\n          v-model=\"name\"\r\n          style=\"width:100%\"\r\n          @select=\"handleSelect\"\r\n        ></el-autocomplete>\r\n        <el-table\r\n          ref=\"listTable\"\r\n          :data=\"nameList\"\r\n          highlight-current-row\r\n          height=\"calc(100vh - 45px)\"\r\n          @current-change=\"handleCurrentChange\"\r\n        >\r\n          <el-table-column property=\"value\" label=\"\" align=\"center\" sortable></el-table-column>\r\n        </el-table>\r\n      </el-drawer>\r\n      <el-container>\r\n        <el-header height=\"auto\">\r\n          <el-row v-if=\"currentRow\">\r\n            <el-col :lg=\"8\" :xs=\"24\">\r\n              <h2>{{currentRow.value}}</h2>\r\n            </el-col>\r\n            <el-col :lg=\"8\" :xs=\"24\">\r\n              <span>\r\n                \r\n                <br />\r\n                <strong>{{currentData.slice(1).filter(d=>d!==0).length}}</strong>\r\n              </span>\r\n            </el-col>\r\n            <el-col :lg=\"8\" :xs=\"24\">\r\n              <span>\r\n                \r\n                <br />\r\n                <strong>{{totalCites}}</strong>\r\n              </span>\r\n            </el-col>\r\n          </el-row>\r\n        </el-header>\r\n        <el-main>\r\n          <div id=\"canvas\"></div>\r\n        </el-main>\r\n        <el-footer height=\"auto\">\r\n          <el-table ref=\"indexTable\" :data=\"currentTableData\" highlight-current-row>\r\n            <el-table-column type=\"index\" align=\"center\"></el-table-column>\r\n            <el-table-column property=\"indicatorName\" label=\"\" align=\"left\" sortable></el-table-column>\r\n            <el-table-column property=\"indicatorValue\" label=\"\" align=\"center\" sortable></el-table-column>\r\n          </el-table>\r\n        </el-footer>\r\n        <CopyRight></CopyRight>\r\n      </el-container>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport Vue from \"vue\";\r\nimport * as echarts from \"echarts/lib/echarts\";\r\nimport \"echarts/lib/chart/map\";\r\nimport \"echarts/lib/component/visualMapContinuous\";\r\nimport \"echarts/lib/component/tooltip\";\r\nimport CopyRight from \"@/components/CopyRight.vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      name: \"\",\r\n      elDrawer: false,\r\n      unfold: true,\r\n      currentRow: null,\r\n      currentData: []\r\n    };\r\n  },\r\n  components: {\r\n    CopyRight\r\n  },\r\n  created() {\r\n    this.$store.dispatch(\"initData\", { name: \"worldMap\" });\r\n    //localStorage\r\n    localStorage.getItem(\"dataset\") &&\r\n      this.$store.replaceState(\r\n        Object.assign(\r\n          this.$store.state,\r\n          JSON.parse(localStorage.getItem(\"dataset\"))\r\n        )\r\n      );\r\n    //vuexlocalStorage\r\n    window.addEventListener(\"beforeunload\", () => {\r\n      localStorage.setItem(\"dataset\", JSON.stringify(this.$store.state));\r\n    });\r\n  },\r\n  updated() {\r\n    let id = this.currentRow ? this.currentRow.id - 1 : 0;\r\n    this.$refs.listTable.setCurrentRow(this.nameList[id]);\r\n  },\r\n  methods: {\r\n    selectUnfold() {\r\n      this.elDrawer = !this.elDrawer;\r\n      this.unfold = !this.unfold;\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentRow = val;\r\n      this.currentData = this.dataList[this.currentRow.id - 1].map(\r\n        (d, index) => {\r\n          return index !== 0 ? +d : d;\r\n        }\r\n      );\r\n      this.drawRadar();\r\n      this.selectUnfold();\r\n    },\r\n    handleSelect(val) {\r\n      this.$refs.listTable.setCurrentRow(this.nameList[val.id - 1]);\r\n    },\r\n    querySearch(queryString, cb) {\r\n      var results = queryString\r\n        ? this.nameList.filter(item => item.value.indexOf(queryString) === 0)\r\n        : this.nameList;\r\n      cb(results);\r\n    },\r\n    drawRadar() {\r\n      let chart = echarts.init(document.getElementById(\"canvas\"));\r\n      chart.showLoading();\r\n      Vue.axios.get(`/data/world-countries.json`).then(response => {\r\n        chart.hideLoading();\r\n        //\r\n        let features = response.data.features.filter(\r\n          d => d.properties.name !== \"Antarctica\"\r\n        );\r\n        let worldGeo = { ...response.data, features };\r\n\r\n        echarts.registerMap(\"WORLD\", worldGeo);\r\n        chart.setOption({\r\n          tooltip: {},\r\n          visualMap: {\r\n            type: \"continuous\",\r\n            min: 0,\r\n            max: Math.max(...this.currentData.slice(1)),\r\n            range: [1, Math.max(...this.currentData.slice(1))],\r\n            text: [\"High\", \"Low\"],\r\n            realtime: false,\r\n            calculable: false,\r\n            inRange: {\r\n              color: [\"#C0C4CC\", \"#F56C6C\"]\r\n            },\r\n            left: 40\r\n          },\r\n          series: [\r\n            {\r\n              type: \"map\",\r\n              mapType: \"WORLD\",\r\n              itemStyle: {},\r\n              emphasis: {\r\n                label: {\r\n                  show: false\r\n                },\r\n                itemStyle: {\r\n                  color: \"#1890FF\",\r\n                  areaColor: \"#1890FF\"\r\n                }\r\n              },\r\n              data: this.currentData.slice(1).map((d, index) => {\r\n                return {\r\n                  name: this.indicatorsList[index + 1],\r\n                  value: d\r\n                };\r\n              }),\r\n              tooltip: {\r\n                formatter: params => {\r\n                  console.log(params);\r\n                  return `${params.data.name}<br>${params.data.value}`;\r\n                },\r\n                backgroundColor: \"rgba(255,255,255,0.8)\",\r\n                textStyle: {\r\n                  color: \"#606266\",\r\n                  fontWeight: \"bold\"\r\n                },\r\n                extraCssText: \"box-shadow: 0px 0px 4px rgba(0,0,0,0.4)\"\r\n              }\r\n            }\r\n          ]\r\n        });\r\n      });\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"indicatorsList\", \"dataList\", \"nameList\"]),\r\n    currentTableData() {\r\n      let that = this;\r\n      return this.currentData\r\n        .slice(1)\r\n        .map((d, index) => {\r\n          return {\r\n            indicatorName: that.indicatorsList[index + 1],\r\n            indicatorValue: d\r\n          };\r\n        })\r\n        .filter(d => d.indicatorValue !== 0);\r\n    },\r\n    totalCites() {\r\n      return this.currentData.slice(1).reduce((accumulator, cur) => {\r\n        return (accumulator += cur);\r\n      }, 0);\r\n    },\r\n    maxminData() {\r\n      let init = new Array(this.dataList[0].length - 2).fill(0);\r\n      let maxData = this.dataList.reduce((accumulator, cur) => {\r\n        let idata = cur.slice(2);\r\n        return accumulator.map((d, index) =>\r\n          d > +idata[index] ? d : +idata[index]\r\n        );\r\n      }, init);\r\n\r\n      let minData = this.dataList.reduce((accumulator, cur) => {\r\n        let idata = cur.slice(2);\r\n        return accumulator.map((d, index) =>\r\n          d < +idata[index] ? d : +idata[index]\r\n        );\r\n      }, init);\r\n\r\n      return {\r\n        maxData,\r\n        minData\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import url(\"../assets/less/base.less\");\r\n.module {\r\n  .el-button {\r\n    position: fixed;\r\n    top: 60px;\r\n    z-index: 3000;\r\n    border-top-left-radius: 0rem;\r\n    border-bottom-left-radius: 0rem;\r\n    border-left-width: 0rem;\r\n    &.fold {\r\n      -webkit-animation: ltr-drawer-in 225ms cubic-bezier(0, 0, 1, 1) 0s;\r\n      animation: ltr-drawer-in 225ms cubic-bezier(0, 0, 1, 1) 0s;\r\n      left: 320px;\r\n    }\r\n    &.unfold {\r\n      left: 0px;\r\n    }\r\n  }\r\n  .el-container {\r\n    .el-aside {\r\n      padding: 20px;\r\n      background: #fff;\r\n      position: sticky;\r\n      position: -webkit-sticky;\r\n      top: 0px;\r\n      z-index: 100;\r\n      height: 100vh;\r\n      overflow: hidden !important;\r\n      .el-autocomplete {\r\n        background-color: #ebeef5;\r\n        width: 100%;\r\n      }\r\n    }\r\n\r\n    .el-container {\r\n      margin: 0px 20px 0px 20px;\r\n      .el-header {\r\n        background-color: #fff;\r\n        margin: 20px 0;\r\n        .el-row {\r\n          .el-col {\r\n            padding: 1rem 0;\r\n          }\r\n        }\r\n        h2 {\r\n          color: @brand-color;\r\n          font-weight: 600;\r\n        }\r\n        span {\r\n          line-height: 2rem;\r\n        }\r\n        strong {\r\n          font-size: 1.8rem;\r\n          color: @brand-color;\r\n        }\r\n      }\r\n      .el-main {\r\n        margin-left: 0;\r\n        margin-top: 0;\r\n        width: 100%;\r\n        background-color: #fff;\r\n        #canvas {\r\n          height: 80vh;\r\n          background-color: #fff;\r\n          padding: 20px 0;\r\n        }\r\n      }\r\n      .el-footer {\r\n        margin: 20px 0 0 0;\r\n        padding: 0;\r\n        background-color: #fff;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorldMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WorldMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WorldMap.vue?vue&type=template&id=9909dec0&\"\nimport script from \"./WorldMap.vue?vue&type=script&lang=js&\"\nexport * from \"./WorldMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WorldMap.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var colorList = seriesModel.get('color');\n    var itemStyleModel = seriesModel.getModel('itemStyle');\n    var areaColor = itemStyleModel.get('areaColor');\n    var color = itemStyleModel.get('color') || colorList[seriesModel.seriesIndex % colorList.length];\n    seriesModel.getData().setVisual({\n      'areaColor': areaColor,\n      'color': color\n    });\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar createHashMap = _util.createHashMap;\n\nvar mapDataStorage = require(\"./mapDataStorage\");\n\nvar geoJSONLoader = require(\"./geoJSONLoader\");\n\nvar geoSVGLoader = require(\"./geoSVGLoader\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar loaders = {\n  geoJSON: geoJSONLoader,\n  svg: geoSVGLoader\n};\nvar _default = {\n  /**\n   * @param {string} mapName\n   * @param {Object} nameMap\n   * @return {Object} source {regions, regionsMap, nameCoordMap, boundingRect}\n   */\n  load: function (mapName, nameMap) {\n    var regions = [];\n    var regionsMap = createHashMap();\n    var nameCoordMap = createHashMap();\n    var boundingRect;\n    var mapRecords = retrieveMap(mapName);\n    each(mapRecords, function (record) {\n      var singleSource = loaders[record.type].load(mapName, record);\n      each(singleSource.regions, function (region) {\n        var regionName = region.name; // Try use the alias in geoNameMap\n\n        if (nameMap && nameMap.hasOwnProperty(regionName)) {\n          region = region.cloneShallow(regionName = nameMap[regionName]);\n        }\n\n        regions.push(region);\n        regionsMap.set(regionName, region);\n        nameCoordMap.set(regionName, region.center);\n      });\n      var rect = singleSource.boundingRect;\n\n      if (rect) {\n        boundingRect ? boundingRect.union(rect) : boundingRect = rect.clone();\n      }\n    });\n    return {\n      regions: regions,\n      regionsMap: regionsMap,\n      nameCoordMap: nameCoordMap,\n      // FIXME Always return new ?\n      boundingRect: boundingRect || new BoundingRect(0, 0, 0, 0)\n    };\n  },\n\n  /**\n   * @param {string} mapName\n   * @param {string} hostKey For cache.\n   * @return {Array.<module:zrender/Element>} Roots.\n   */\n  makeGraphic: makeInvoker('makeGraphic'),\n\n  /**\n   * @param {string} mapName\n   * @param {string} hostKey For cache.\n   */\n  removeGraphic: makeInvoker('removeGraphic')\n};\n\nfunction makeInvoker(methodName) {\n  return function (mapName, hostKey) {\n    var mapRecords = retrieveMap(mapName);\n    var results = [];\n    each(mapRecords, function (record) {\n      var method = loaders[record.type][methodName];\n      method && results.push(method(mapName, record, hostKey));\n    });\n    return results;\n  };\n}\n\nfunction mapNotExistsError(mapName) {}\n\nfunction retrieveMap(mapName) {\n  var mapRecords = mapDataStorage.retrieveMap(mapName) || [];\n  return mapRecords;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar _number = require(\"../util/number\");\n\nvar linearMap = _number.linearMap;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar CATEGORY_DEFAULT_VISUAL_INDEX = -1;\n/**\n * @param {Object} option\n * @param {string} [option.type] See visualHandlers.\n * @param {string} [option.mappingMethod] 'linear' or 'piecewise' or 'category' or 'fixed'\n * @param {Array.<number>=} [option.dataExtent] [minExtent, maxExtent],\n *                                              required when mappingMethod is 'linear'\n * @param {Array.<Object>=} [option.pieceList] [\n *                                             {value: someValue},\n *                                             {interval: [min1, max1], visual: {...}},\n *                                             {interval: [min2, max2]}\n *                                             ],\n *                                            required when mappingMethod is 'piecewise'.\n *                                            Visual for only each piece can be specified.\n * @param {Array.<string|Object>=} [option.categories] ['cate1', 'cate2']\n *                                            required when mappingMethod is 'category'.\n *                                            If no option.categories, categories is set\n *                                            as [0, 1, 2, ...].\n * @param {boolean} [option.loop=false] Whether loop mapping when mappingMethod is 'category'.\n * @param {(Array|Object|*)} [option.visual]  Visual data.\n *                                            when mappingMethod is 'category',\n *                                            visual data can be array or object\n *                                            (like: {cate1: '#222', none: '#fff'})\n *                                            or primary types (which represents\n *                                            defualt category visual), otherwise visual\n *                                            can be array or primary (which will be\n *                                            normalized to array).\n *\n */\n\nvar VisualMapping = function (option) {\n  var mappingMethod = option.mappingMethod;\n  var visualType = option.type;\n  /**\n   * @readOnly\n   * @type {Object}\n   */\n\n  var thisOption = this.option = zrUtil.clone(option);\n  /**\n   * @readOnly\n   * @type {string}\n   */\n\n  this.type = visualType;\n  /**\n   * @readOnly\n   * @type {string}\n   */\n\n  this.mappingMethod = mappingMethod;\n  /**\n   * @private\n   * @type {Function}\n   */\n\n  this._normalizeData = normalizers[mappingMethod];\n  var visualHandler = visualHandlers[visualType];\n  /**\n   * @public\n   * @type {Function}\n   */\n\n  this.applyVisual = visualHandler.applyVisual;\n  /**\n   * @public\n   * @type {Function}\n   */\n\n  this.getColorMapper = visualHandler.getColorMapper;\n  /**\n   * @private\n   * @type {Function}\n   */\n\n  this._doMap = visualHandler._doMap[mappingMethod];\n\n  if (mappingMethod === 'piecewise') {\n    normalizeVisualRange(thisOption);\n    preprocessForPiecewise(thisOption);\n  } else if (mappingMethod === 'category') {\n    thisOption.categories ? preprocessForSpecifiedCategory(thisOption) // categories is ordinal when thisOption.categories not specified,\n    // which need no more preprocess except normalize visual.\n    : normalizeVisualRange(thisOption, true);\n  } else {\n    // mappingMethod === 'linear' or 'fixed'\n    zrUtil.assert(mappingMethod !== 'linear' || thisOption.dataExtent);\n    normalizeVisualRange(thisOption);\n  }\n};\n\nVisualMapping.prototype = {\n  constructor: VisualMapping,\n  mapValueToVisual: function (value) {\n    var normalized = this._normalizeData(value);\n\n    return this._doMap(normalized, value);\n  },\n  getNormalizer: function () {\n    return zrUtil.bind(this._normalizeData, this);\n  }\n};\nvar visualHandlers = VisualMapping.visualHandlers = {\n  color: {\n    applyVisual: makeApplyVisual('color'),\n\n    /**\n     * Create a mapper function\n     * @return {Function}\n     */\n    getColorMapper: function () {\n      var thisOption = this.option;\n      return zrUtil.bind(thisOption.mappingMethod === 'category' ? function (value, isNormalized) {\n        !isNormalized && (value = this._normalizeData(value));\n        return doMapCategory.call(this, value);\n      } : function (value, isNormalized, out) {\n        // If output rgb array\n        // which will be much faster and useful in pixel manipulation\n        var returnRGBArray = !!out;\n        !isNormalized && (value = this._normalizeData(value));\n        out = zrColor.fastLerp(value, thisOption.parsedVisual, out);\n        return returnRGBArray ? out : zrColor.stringify(out, 'rgba');\n      }, this);\n    },\n    _doMap: {\n      linear: function (normalized) {\n        return zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n      },\n      category: doMapCategory,\n      piecewise: function (normalized, value) {\n        var result = getSpecifiedVisual.call(this, value);\n\n        if (result == null) {\n          result = zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n        }\n\n        return result;\n      },\n      fixed: doMapFixed\n    }\n  },\n  colorHue: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, value);\n  }),\n  colorSaturation: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, null, value);\n  }),\n  colorLightness: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyHSL(color, null, null, value);\n  }),\n  colorAlpha: makePartialColorVisualHandler(function (color, value) {\n    return zrColor.modifyAlpha(color, value);\n  }),\n  opacity: {\n    applyVisual: makeApplyVisual('opacity'),\n    _doMap: makeDoMap([0, 1])\n  },\n  liftZ: {\n    applyVisual: makeApplyVisual('liftZ'),\n    _doMap: {\n      linear: doMapFixed,\n      category: doMapFixed,\n      piecewise: doMapFixed,\n      fixed: doMapFixed\n    }\n  },\n  symbol: {\n    applyVisual: function (value, getter, setter) {\n      var symbolCfg = this.mapValueToVisual(value);\n\n      if (zrUtil.isString(symbolCfg)) {\n        setter('symbol', symbolCfg);\n      } else if (isObject(symbolCfg)) {\n        for (var name in symbolCfg) {\n          if (symbolCfg.hasOwnProperty(name)) {\n            setter(name, symbolCfg[name]);\n          }\n        }\n      }\n    },\n    _doMap: {\n      linear: doMapToArray,\n      category: doMapCategory,\n      piecewise: function (normalized, value) {\n        var result = getSpecifiedVisual.call(this, value);\n\n        if (result == null) {\n          result = doMapToArray.call(this, normalized);\n        }\n\n        return result;\n      },\n      fixed: doMapFixed\n    }\n  },\n  symbolSize: {\n    applyVisual: makeApplyVisual('symbolSize'),\n    _doMap: makeDoMap([0, 1])\n  }\n};\n\nfunction preprocessForPiecewise(thisOption) {\n  var pieceList = thisOption.pieceList;\n  thisOption.hasSpecialVisual = false;\n  zrUtil.each(pieceList, function (piece, index) {\n    piece.originIndex = index; // piece.visual is \"result visual value\" but not\n    // a visual range, so it does not need to be normalized.\n\n    if (piece.visual != null) {\n      thisOption.hasSpecialVisual = true;\n    }\n  });\n}\n\nfunction preprocessForSpecifiedCategory(thisOption) {\n  // Hash categories.\n  var categories = thisOption.categories;\n  var visual = thisOption.visual;\n  var categoryMap = thisOption.categoryMap = {};\n  each(categories, function (cate, index) {\n    categoryMap[cate] = index;\n  }); // Process visual map input.\n\n  if (!zrUtil.isArray(visual)) {\n    var visualArr = [];\n\n    if (zrUtil.isObject(visual)) {\n      each(visual, function (v, cate) {\n        var index = categoryMap[cate];\n        visualArr[index != null ? index : CATEGORY_DEFAULT_VISUAL_INDEX] = v;\n      });\n    } else {\n      // Is primary type, represents default visual.\n      visualArr[CATEGORY_DEFAULT_VISUAL_INDEX] = visual;\n    }\n\n    visual = setVisualToOption(thisOption, visualArr);\n  } // Remove categories that has no visual,\n  // then we can mapping them to CATEGORY_DEFAULT_VISUAL_INDEX.\n\n\n  for (var i = categories.length - 1; i >= 0; i--) {\n    if (visual[i] == null) {\n      delete categoryMap[categories[i]];\n      categories.pop();\n    }\n  }\n}\n\nfunction normalizeVisualRange(thisOption, isCategory) {\n  var visual = thisOption.visual;\n  var visualArr = [];\n\n  if (zrUtil.isObject(visual)) {\n    each(visual, function (v) {\n      visualArr.push(v);\n    });\n  } else if (visual != null) {\n    visualArr.push(visual);\n  }\n\n  var doNotNeedPair = {\n    color: 1,\n    symbol: 1\n  };\n\n  if (!isCategory && visualArr.length === 1 && !doNotNeedPair.hasOwnProperty(thisOption.type)) {\n    // Do not care visualArr.length === 0, which is illegal.\n    visualArr[1] = visualArr[0];\n  }\n\n  setVisualToOption(thisOption, visualArr);\n}\n\nfunction makePartialColorVisualHandler(applyValue) {\n  return {\n    applyVisual: function (value, getter, setter) {\n      value = this.mapValueToVisual(value); // Must not be array value\n\n      setter('color', applyValue(getter('color'), value));\n    },\n    _doMap: makeDoMap([0, 1])\n  };\n}\n\nfunction doMapToArray(normalized) {\n  var visual = this.option.visual;\n  return visual[Math.round(linearMap(normalized, [0, 1], [0, visual.length - 1], true))] || {};\n}\n\nfunction makeApplyVisual(visualType) {\n  return function (value, getter, setter) {\n    setter(visualType, this.mapValueToVisual(value));\n  };\n}\n\nfunction doMapCategory(normalized) {\n  var visual = this.option.visual;\n  return visual[this.option.loop && normalized !== CATEGORY_DEFAULT_VISUAL_INDEX ? normalized % visual.length : normalized];\n}\n\nfunction doMapFixed() {\n  return this.option.visual[0];\n}\n\nfunction makeDoMap(sourceExtent) {\n  return {\n    linear: function (normalized) {\n      return linearMap(normalized, sourceExtent, this.option.visual, true);\n    },\n    category: doMapCategory,\n    piecewise: function (normalized, value) {\n      var result = getSpecifiedVisual.call(this, value);\n\n      if (result == null) {\n        result = linearMap(normalized, sourceExtent, this.option.visual, true);\n      }\n\n      return result;\n    },\n    fixed: doMapFixed\n  };\n}\n\nfunction getSpecifiedVisual(value) {\n  var thisOption = this.option;\n  var pieceList = thisOption.pieceList;\n\n  if (thisOption.hasSpecialVisual) {\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList);\n    var piece = pieceList[pieceIndex];\n\n    if (piece && piece.visual) {\n      return piece.visual[this.type];\n    }\n  }\n}\n\nfunction setVisualToOption(thisOption, visualArr) {\n  thisOption.visual = visualArr;\n\n  if (thisOption.type === 'color') {\n    thisOption.parsedVisual = zrUtil.map(visualArr, function (item) {\n      return zrColor.parse(item);\n    });\n  }\n\n  return visualArr;\n}\n/**\n * Normalizers by mapping methods.\n */\n\n\nvar normalizers = {\n  linear: function (value) {\n    return linearMap(value, this.option.dataExtent, [0, 1], true);\n  },\n  piecewise: function (value) {\n    var pieceList = this.option.pieceList;\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList, true);\n\n    if (pieceIndex != null) {\n      return linearMap(pieceIndex, [0, pieceList.length - 1], [0, 1], true);\n    }\n  },\n  category: function (value) {\n    var index = this.option.categories ? this.option.categoryMap[value] : value; // ordinal\n\n    return index == null ? CATEGORY_DEFAULT_VISUAL_INDEX : index;\n  },\n  fixed: zrUtil.noop\n};\n/**\n * List available visual types.\n *\n * @public\n * @return {Array.<string>}\n */\n\nVisualMapping.listVisualTypes = function () {\n  var visualTypes = [];\n  zrUtil.each(visualHandlers, function (handler, key) {\n    visualTypes.push(key);\n  });\n  return visualTypes;\n};\n/**\n * @public\n */\n\n\nVisualMapping.addVisualHandler = function (name, handler) {\n  visualHandlers[name] = handler;\n};\n/**\n * @public\n */\n\n\nVisualMapping.isValidType = function (visualType) {\n  return visualHandlers.hasOwnProperty(visualType);\n};\n/**\n * Convinent method.\n * Visual can be Object or Array or primary type.\n *\n * @public\n */\n\n\nVisualMapping.eachVisual = function (visual, callback, context) {\n  if (zrUtil.isObject(visual)) {\n    zrUtil.each(visual, callback, context);\n  } else {\n    callback.call(context, visual);\n  }\n};\n\nVisualMapping.mapVisual = function (visual, callback, context) {\n  var isPrimary;\n  var newVisual = zrUtil.isArray(visual) ? [] : zrUtil.isObject(visual) ? {} : (isPrimary = true, null);\n  VisualMapping.eachVisual(visual, function (v, key) {\n    var newVal = callback.call(context, v, key);\n    isPrimary ? newVisual = newVal : newVisual[key] = newVal;\n  });\n  return newVisual;\n};\n/**\n * @public\n * @param {Object} obj\n * @return {Object} new object containers visual values.\n *                 If no visuals, return null.\n */\n\n\nVisualMapping.retrieveVisuals = function (obj) {\n  var ret = {};\n  var hasVisual;\n  obj && each(visualHandlers, function (h, visualType) {\n    if (obj.hasOwnProperty(visualType)) {\n      ret[visualType] = obj[visualType];\n      hasVisual = true;\n    }\n  });\n  return hasVisual ? ret : null;\n};\n/**\n * Give order to visual types, considering colorSaturation, colorAlpha depends on color.\n *\n * @public\n * @param {(Object|Array)} visualTypes If Object, like: {color: ..., colorSaturation: ...}\n *                                     IF Array, like: ['color', 'symbol', 'colorSaturation']\n * @return {Array.<string>} Sorted visual types.\n */\n\n\nVisualMapping.prepareVisualTypes = function (visualTypes) {\n  if (isObject(visualTypes)) {\n    var types = [];\n    each(visualTypes, function (item, type) {\n      types.push(type);\n    });\n    visualTypes = types;\n  } else if (zrUtil.isArray(visualTypes)) {\n    visualTypes = visualTypes.slice();\n  } else {\n    return [];\n  }\n\n  visualTypes.sort(function (type1, type2) {\n    // color should be front of colorSaturation, colorAlpha, ...\n    // symbol and symbolSize do not matter.\n    return type2 === 'color' && type1 !== 'color' && type1.indexOf('color') === 0 ? 1 : -1;\n  });\n  return visualTypes;\n};\n/**\n * 'color', 'colorSaturation', 'colorAlpha', ... are depends on 'color'.\n * Other visuals are only depends on themself.\n *\n * @public\n * @param {string} visualType1\n * @param {string} visualType2\n * @return {boolean}\n */\n\n\nVisualMapping.dependsOn = function (visualType1, visualType2) {\n  return visualType2 === 'color' ? !!(visualType1 && visualType1.indexOf(visualType2) === 0) : visualType1 === visualType2;\n};\n/**\n * @param {number} value\n * @param {Array.<Object>} pieceList [{value: ..., interval: [min, max]}, ...]\n *                         Always from small to big.\n * @param {boolean} [findClosestWhenOutside=false]\n * @return {number} index\n */\n\n\nVisualMapping.findPieceIndex = function (value, pieceList, findClosestWhenOutside) {\n  var possibleI;\n  var abs = Infinity; // value has the higher priority.\n\n  for (var i = 0, len = pieceList.length; i < len; i++) {\n    var pieceValue = pieceList[i].value;\n\n    if (pieceValue != null) {\n      if (pieceValue === value // FIXME\n      // It is supposed to compare value according to value type of dimension,\n      // but currently value type can exactly be string or number.\n      // Compromise for numeric-like string (like '12'), especially\n      // in the case that visualMap.categories is ['22', '33'].\n      || typeof pieceValue === 'string' && pieceValue === value + '') {\n        return i;\n      }\n\n      findClosestWhenOutside && updatePossible(pieceValue, i);\n    }\n  }\n\n  for (var i = 0, len = pieceList.length; i < len; i++) {\n    var piece = pieceList[i];\n    var interval = piece.interval;\n    var close = piece.close;\n\n    if (interval) {\n      if (interval[0] === -Infinity) {\n        if (littleThan(close[1], value, interval[1])) {\n          return i;\n        }\n      } else if (interval[1] === Infinity) {\n        if (littleThan(close[0], interval[0], value)) {\n          return i;\n        }\n      } else if (littleThan(close[0], interval[0], value) && littleThan(close[1], value, interval[1])) {\n        return i;\n      }\n\n      findClosestWhenOutside && updatePossible(interval[0], i);\n      findClosestWhenOutside && updatePossible(interval[1], i);\n    }\n  }\n\n  if (findClosestWhenOutside) {\n    return value === Infinity ? pieceList.length - 1 : value === -Infinity ? 0 : possibleI;\n  }\n\n  function updatePossible(val, index) {\n    var newAbs = Math.abs(val - value);\n\n    if (newAbs < abs) {\n      abs = newAbs;\n      possibleI = index;\n    }\n  }\n};\n\nfunction littleThan(close, a, b) {\n  return close ? a <= b : a < b;\n}\n\nvar _default = VisualMapping;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Visual mapping.\n */\nvar visualDefault = {\n  /**\n   * @public\n   */\n  get: function (visualType, key, isCategory) {\n    var value = zrUtil.clone((defaultOption[visualType] || {})[key]);\n    return isCategory ? zrUtil.isArray(value) ? value[value.length - 1] : value : value;\n  }\n};\nvar defaultOption = {\n  color: {\n    active: ['#006edd', '#e0ffff'],\n    inactive: ['rgba(0,0,0,0)']\n  },\n  colorHue: {\n    active: [0, 360],\n    inactive: [0, 0]\n  },\n  colorSaturation: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  colorLightness: {\n    active: [0.9, 0.5],\n    inactive: [0, 0]\n  },\n  colorAlpha: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  opacity: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  symbol: {\n    active: ['circle', 'roundRect', 'diamond'],\n    inactive: ['none']\n  },\n  symbolSize: {\n    active: [10, 50],\n    inactive: [0, 0]\n  }\n};\nvar _default = visualDefault;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./map/MapSeries\");\n\nrequire(\"./map/MapView\");\n\nrequire(\"../action/geoRoam\");\n\nrequire(\"../coord/geo/geoCreator\");\n\nvar mapSymbolLayout = require(\"./map/mapSymbolLayout\");\n\nvar mapVisual = require(\"./map/mapVisual\");\n\nvar mapDataStatistic = require(\"./map/mapDataStatistic\");\n\nvar backwardCompat = require(\"./map/backwardCompat\");\n\nvar createDataSelectAction = require(\"../action/createDataSelectAction\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\necharts.registerLayout(mapSymbolLayout);\necharts.registerVisual(mapVisual);\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, mapDataStatistic);\necharts.registerPreprocessor(backwardCompat);\ncreateDataSelectAction('map', [{\n  type: 'mapToggleSelect',\n  event: 'mapselectchanged',\n  method: 'toggleSelected'\n}, {\n  type: 'mapSelect',\n  event: 'mapselected',\n  method: 'select'\n}, {\n  type: 'mapUnSelect',\n  event: 'mapunselected',\n  method: 'unSelect'\n}]);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar geoCoordMap = {\n  'Russia': [100, 60],\n  'United States': [-99, 38],\n  'United States of America': [-99, 38]\n};\n\nfunction _default(mapType, region) {\n  if (mapType === 'world') {\n    var geoCoord = geoCoordMap[region.name];\n\n    if (geoCoord) {\n      var cp = region.center;\n      cp[0] = geoCoord[0];\n      cp[1] = geoCoord[1];\n    }\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar Transformable = require(\"zrender/lib/mixin/Transformable\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\nvar v2ApplyTransform = vector.applyTransform; // Dummy transform node\n\nfunction TransformDummy() {\n  Transformable.call(this);\n}\n\nzrUtil.mixin(TransformDummy, Transformable);\n\nfunction View(name) {\n  /**\n   * @type {string}\n   */\n  this.name = name;\n  /**\n   * @type {Object}\n   */\n\n  this.zoomLimit;\n  Transformable.call(this);\n  this._roamTransformable = new TransformDummy();\n  this._rawTransformable = new TransformDummy();\n  this._center;\n  this._zoom;\n}\n\nView.prototype = {\n  constructor: View,\n  type: 'view',\n\n  /**\n   * @param {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Set bounding rect\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  // PENDING to getRect\n  setBoundingRect: function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    return this._rect;\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  // PENDING to getRect\n  getBoundingRect: function () {\n    return this._rect;\n  },\n\n  /**\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  setViewRect: function (x, y, width, height) {\n    this.transformTo(x, y, width, height);\n    this._viewRect = new BoundingRect(x, y, width, height);\n  },\n\n  /**\n   * Transformed to particular position and size\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  transformTo: function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    rawTransform.decomposeTransform();\n\n    this._updateTransform();\n  },\n\n  /**\n   * Set center of view\n   * @param {Array.<number>} [centerCoord]\n   */\n  setCenter: function (centerCoord) {\n    if (!centerCoord) {\n      return;\n    }\n\n    this._center = centerCoord;\n\n    this._updateCenterAndZoom();\n  },\n\n  /**\n   * @param {number} zoom\n   */\n  setZoom: function (zoom) {\n    zoom = zoom || 1;\n    var zoomLimit = this.zoomLimit;\n\n    if (zoomLimit) {\n      if (zoomLimit.max != null) {\n        zoom = Math.min(zoomLimit.max, zoom);\n      }\n\n      if (zoomLimit.min != null) {\n        zoom = Math.max(zoomLimit.min, zoom);\n      }\n    }\n\n    this._zoom = zoom;\n\n    this._updateCenterAndZoom();\n  },\n\n  /**\n   * Get default center without roam\n   */\n  getDefaultCenter: function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  },\n  getCenter: function () {\n    return this._center || this.getDefaultCenter();\n  },\n  getZoom: function () {\n    return this._zoom || 1;\n  },\n\n  /**\n   * @return {Array.<number}\n   */\n  getRoamTransform: function () {\n    return this._roamTransformable.getLocalTransform();\n  },\n\n  /**\n   * Remove roam\n   */\n  _updateCenterAndZoom: function () {\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.origin = center;\n    roamTransform.position = [defaultCenter[0] - center[0], defaultCenter[1] - center[1]];\n    roamTransform.scale = [zoom, zoom];\n\n    this._updateTransform();\n  },\n\n  /**\n   * Update transform from roam and mapLocation\n   * @private\n   */\n  _updateTransform: function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getViewRect: function () {\n    return this._viewRect;\n  },\n\n  /**\n   * Get view rect after roam transform\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getViewRectAfterRoam: function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  },\n\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   * @param {Array.<number>} data\n   * @param {boolean} noRoam\n   * @param {Array.<number>} [out]\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  },\n\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   * @param {Array.<number>} point\n   * @return {Array.<number>}\n   */\n  pointToData: function (point) {\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform([], point, invTransform) : [point[0], point[1]];\n  },\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  convertToPixel: zrUtil.curry(doConvert, 'dataToPoint'),\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  convertFromPixel: zrUtil.curry(doConvert, 'pointToData'),\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  containPoint: function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  }\n  /**\n   * @return {number}\n   */\n  // getScalarScale: function () {\n  //     // Use determinant square root of transform to mutiply scalar\n  //     var m = this.transform;\n  //     var det = Math.sqrt(Math.abs(m[0] * m[3] - m[2] * m[1]));\n  //     return det;\n  // }\n\n};\nzrUtil.mixin(View, Transformable);\n\nfunction doConvert(methodName, ecModel, finder, value) {\n  var seriesModel = finder.seriesModel;\n  var coordSys = seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n\n  return coordSys === this ? coordSys[methodName](value) : null;\n}\n\nvar _default = View;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Data selectable mixin for chart series.\n * To eanble data select, option of series must have `selectedMode`.\n * And each data item will use `selected` to toggle itself selected status\n */\nvar _default = {\n  /**\n   * @param {Array.<Object>} targetList [{name, value, selected}, ...]\n   *        If targetList is an array, it should like [{name: ..., value: ...}, ...].\n   *        If targetList is a \"List\", it must have coordDim: 'value' dimension and name.\n   */\n  updateSelectedMap: function (targetList) {\n    this._targetList = zrUtil.isArray(targetList) ? targetList.slice() : [];\n    this._selectTargetMap = zrUtil.reduce(targetList || [], function (targetMap, target) {\n      targetMap.set(target.name, target);\n      return targetMap;\n    }, zrUtil.createHashMap());\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  // PENGING If selectedMode is null ?\n  select: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      this._selectTargetMap.each(function (target) {\n        target.selected = false;\n      });\n    }\n\n    target && (target.selected = true);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  unSelect: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name); // var selectedMode = this.get('selectedMode');\n    // selectedMode !== 'single' && target && (target.selected = false);\n\n    target && (target.selected = false);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  toggleSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n\n    if (target != null) {\n      this[target.selected ? 'unSelect' : 'select'](name, id);\n      return target.selected;\n    }\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  isSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    return target && target.selected;\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar layout = require(\"../../util/layout\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentView({\n  type: 'visualMap',\n\n  /**\n   * @readOnly\n   * @type {Object}\n   */\n  autoPositionValues: {\n    left: 1,\n    right: 1,\n    top: 1,\n    bottom: 1\n  },\n  init: function (ecModel, api) {\n    /**\n     * @readOnly\n     * @type {module:echarts/model/Global}\n     */\n    this.ecModel = ecModel;\n    /**\n     * @readOnly\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this.api = api;\n    /**\n     * @readOnly\n     * @type {module:echarts/component/visualMap/visualMapModel}\n     */\n\n    this.visualMapModel;\n  },\n\n  /**\n   * @protected\n   */\n  render: function (visualMapModel, ecModel, api, payload) {\n    this.visualMapModel = visualMapModel;\n\n    if (visualMapModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    this.doRender.apply(this, arguments);\n  },\n\n  /**\n   * @protected\n   */\n  renderBackground: function (group) {\n    var visualMapModel = this.visualMapModel;\n    var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0);\n    var rect = group.getBoundingRect();\n    group.add(new graphic.Rect({\n      z2: -1,\n      // Lay background rect on the lowest layer.\n      silent: true,\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[3] + padding[1],\n        height: rect.height + padding[0] + padding[2]\n      },\n      style: {\n        fill: visualMapModel.get('backgroundColor'),\n        stroke: visualMapModel.get('borderColor'),\n        lineWidth: visualMapModel.get('borderWidth')\n      }\n    }));\n  },\n\n  /**\n   * @protected\n   * @param {number} targetValue can be Infinity or -Infinity\n   * @param {string=} visualCluster Only can be 'color' 'opacity' 'symbol' 'symbolSize'\n   * @param {Object} [opts]\n   * @param {string=} [opts.forceState] Specify state, instead of using getValueState method.\n   * @param {string=} [opts.convertOpacityToAlpha=false] For color gradient in controller widget.\n   * @return {*} Visual value.\n   */\n  getControllerVisual: function (targetValue, visualCluster, opts) {\n    opts = opts || {};\n    var forceState = opts.forceState;\n    var visualMapModel = this.visualMapModel;\n    var visualObj = {}; // Default values.\n\n    if (visualCluster === 'symbol') {\n      visualObj.symbol = visualMapModel.get('itemSymbol');\n    }\n\n    if (visualCluster === 'color') {\n      var defaultColor = visualMapModel.get('contentColor');\n      visualObj.color = defaultColor;\n    }\n\n    function getter(key) {\n      return visualObj[key];\n    }\n\n    function setter(key, value) {\n      visualObj[key] = value;\n    }\n\n    var mappings = visualMapModel.controllerVisuals[forceState || visualMapModel.getValueState(targetValue)];\n    var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n    zrUtil.each(visualTypes, function (type) {\n      var visualMapping = mappings[type];\n\n      if (opts.convertOpacityToAlpha && type === 'opacity') {\n        type = 'colorAlpha';\n        visualMapping = mappings.__alphaForOpacity;\n      }\n\n      if (VisualMapping.dependsOn(type, visualCluster)) {\n        visualMapping && visualMapping.applyVisual(targetValue, getter, setter);\n      }\n    });\n    return visualObj[visualCluster];\n  },\n\n  /**\n   * @protected\n   */\n  positionGroup: function (group) {\n    var model = this.visualMapModel;\n    var api = this.api;\n    layout.positionElement(group, model.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  },\n\n  /**\n   * @protected\n   * @abstract\n   */\n  doRender: zrUtil.noop\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar preprocessor = require(\"./visualMap/preprocessor\");\n\nrequire(\"./visualMap/typeDefaulter\");\n\nrequire(\"./visualMap/visualEncoding\");\n\nrequire(\"./visualMap/ContinuousModel\");\n\nrequire(\"./visualMap/ContinuousView\");\n\nrequire(\"./visualMap/visualMapAction\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * DataZoom component entry\n */\necharts.registerPreprocessor(preprocessor);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType, actionInfos) {\n  zrUtil.each(actionInfos, function (actionInfo) {\n    actionInfo.update = 'updateView';\n    /**\n     * @payload\n     * @property {string} seriesName\n     * @property {string} name\n     */\n\n    echarts.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: seriesType,\n        query: payload\n      }, function (seriesModel) {\n        if (seriesModel[actionInfo.method]) {\n          seriesModel[actionInfo.method](payload.name, payload.dataIndex);\n        }\n\n        var data = seriesModel.getData(); // Create selected map\n\n        data.each(function (idx) {\n          var name = data.getName(idx);\n          selected[name] = seriesModel.isSelected(name) || false;\n        });\n      });\n      return {\n        name: payload.name,\n        selected: selected,\n        seriesId: payload.seriesId\n      };\n    });\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(option) {\n  // Save geoCoord\n  var mapSeries = [];\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'map') {\n      mapSeries.push(seriesOpt);\n      seriesOpt.map = seriesOpt.map || seriesOpt.mapType; // Put x, y, width, height, x2, y2 in the top level\n\n      zrUtil.defaults(seriesOpt, seriesOpt.mapLocation);\n    }\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ATTR = '\\0_ec_interaction_mutex';\n\nfunction take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\n\nfunction release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\n\nfunction isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, function () {});\nexports.take = take;\nexports.release = release;\nexports.isTaken = isTaken;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar MapDraw = require(\"../../component/helper/MapDraw\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar HIGH_DOWN_PROP = '__seriesMapHighDown';\nvar RECORD_VERSION_PROP = '__seriesMapCallKey';\n\nvar _default = echarts.extendChartView({\n  type: 'map',\n  render: function (mapModel, ecModel, api, payload) {\n    // Not render if it is an toggleSelect action from self\n    if (payload && payload.type === 'mapToggleSelect' && payload.from === this.uid) {\n      return;\n    }\n\n    var group = this.group;\n    group.removeAll();\n\n    if (mapModel.getHostGeoModel()) {\n      return;\n    } // Not update map if it is an roam action from self\n\n\n    if (!(payload && payload.type === 'geoRoam' && payload.componentType === 'series' && payload.seriesId === mapModel.id)) {\n      if (mapModel.needsDrawMap) {\n        var mapDraw = this._mapDraw || new MapDraw(api, true);\n        group.add(mapDraw.group);\n        mapDraw.draw(mapModel, ecModel, api, this, payload);\n        this._mapDraw = mapDraw;\n      } else {\n        // Remove drawed map\n        this._mapDraw && this._mapDraw.remove();\n        this._mapDraw = null;\n      }\n    } else {\n      var mapDraw = this._mapDraw;\n      mapDraw && group.add(mapDraw.group);\n    }\n\n    mapModel.get('showLegendSymbol') && ecModel.getComponent('legend') && this._renderSymbols(mapModel, ecModel, api);\n  },\n  remove: function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n    this.group.removeAll();\n  },\n  dispose: function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n  },\n  _renderSymbols: function (mapModel, ecModel, api) {\n    var originalData = mapModel.originalData;\n    var group = this.group;\n    originalData.each(originalData.mapDimension('value'), function (value, originalDataIndex) {\n      if (isNaN(value)) {\n        return;\n      }\n\n      var layout = originalData.getItemLayout(originalDataIndex);\n\n      if (!layout || !layout.point) {\n        // Not exists in map\n        return;\n      }\n\n      var point = layout.point;\n      var offset = layout.offset;\n      var circle = new graphic.Circle({\n        style: {\n          // Because the special of map draw.\n          // Which needs statistic of multiple series and draw on one map.\n          // And each series also need a symbol with legend color\n          //\n          // Layout and visual are put one the different data\n          fill: mapModel.getData().getVisual('color')\n        },\n        shape: {\n          cx: point[0] + offset * 9,\n          cy: point[1],\n          r: 3\n        },\n        silent: true,\n        // Do not overlap the first series, on which labels are displayed.\n        z2: 8 + (!offset ? graphic.Z2_EMPHASIS_LIFT + 1 : 0)\n      }); // Only the series that has the first value on the same region is in charge of rendering the label.\n      // But consider the case:\n      // series: [\n      //     {id: 'X', type: 'map', map: 'm', {data: [{name: 'A', value: 11}, {name: 'B', {value: 22}]},\n      //     {id: 'Y', type: 'map', map: 'm', {data: [{name: 'A', value: 21}, {name: 'C', {value: 33}]}\n      // ]\n      // The offset `0` of item `A` is at series `X`, but of item `C` is at series `Y`.\n      // For backward compatibility, we follow the rule that render label `A` by the\n      // settings on series `X` but render label `C` by the settings on series `Y`.\n\n      if (!offset) {\n        var fullData = mapModel.mainSeries.getData();\n        var name = originalData.getName(originalDataIndex);\n        var fullIndex = fullData.indexOfName(name);\n        var itemModel = originalData.getItemModel(originalDataIndex);\n        var labelModel = itemModel.getModel('label');\n        var hoverLabelModel = itemModel.getModel('emphasis.label');\n        var regionGroup = fullData.getItemGraphicEl(fullIndex); // `getFormattedLabel` needs to use `getData` inside. Here\n        // `mapModel.getData()` is shallow cloned from `mainSeries.getData()`.\n        // FIXME\n        // If this is not the `mainSeries`, the item model (like label formatter)\n        // set on original data item will never get. But it has been working\n        // like that from the begining, and this scenario is rarely encountered.\n        // So it won't be fixed until have to.\n\n        var normalText = zrUtil.retrieve2(mapModel.getFormattedLabel(fullIndex, 'normal'), name);\n        var emphasisText = zrUtil.retrieve2(mapModel.getFormattedLabel(fullIndex, 'emphasis'), normalText);\n        var highDownRecord = regionGroup[HIGH_DOWN_PROP];\n        var recordVersion = Math.random(); // Prevent from register listeners duplicatedly when roaming.\n\n        if (!highDownRecord) {\n          highDownRecord = regionGroup[HIGH_DOWN_PROP] = {};\n          var onEmphasis = zrUtil.curry(onRegionHighDown, true);\n          var onNormal = zrUtil.curry(onRegionHighDown, false);\n          regionGroup.on('mouseover', onEmphasis).on('mouseout', onNormal).on('emphasis', onEmphasis).on('normal', onNormal);\n        } // Prevent removed regions effect current grapics.\n\n\n        regionGroup[RECORD_VERSION_PROP] = recordVersion;\n        zrUtil.extend(highDownRecord, {\n          recordVersion: recordVersion,\n          circle: circle,\n          labelModel: labelModel,\n          hoverLabelModel: hoverLabelModel,\n          emphasisText: emphasisText,\n          normalText: normalText\n        }); // FIXME\n        // Consider set option when emphasis.\n\n        enterRegionHighDown(highDownRecord, false);\n      }\n\n      group.add(circle);\n    });\n  }\n});\n\nfunction onRegionHighDown(toHighOrDown) {\n  var highDownRecord = this[HIGH_DOWN_PROP];\n\n  if (highDownRecord && highDownRecord.recordVersion === this[RECORD_VERSION_PROP]) {\n    enterRegionHighDown(highDownRecord, toHighOrDown);\n  }\n}\n\nfunction enterRegionHighDown(highDownRecord, toHighOrDown) {\n  var circle = highDownRecord.circle;\n  var labelModel = highDownRecord.labelModel;\n  var hoverLabelModel = highDownRecord.hoverLabelModel;\n  var emphasisText = highDownRecord.emphasisText;\n  var normalText = highDownRecord.normalText;\n\n  if (toHighOrDown) {\n    circle.style.extendFrom(graphic.setTextStyle({}, hoverLabelModel, {\n      text: hoverLabelModel.get('show') ? emphasisText : null\n    }, {\n      isRectText: true,\n      useInsideStyle: false\n    }, true)); // Make label upper than others if overlaps.\n\n    circle.__mapOriginalZ2 = circle.z2;\n    circle.z2 += graphic.Z2_EMPHASIS_LIFT;\n  } else {\n    graphic.setTextStyle(circle.style, labelModel, {\n      text: labelModel.get('show') ? normalText : null,\n      textPosition: labelModel.getShallow('position') || 'bottom'\n    }, {\n      isRectText: true,\n      useInsideStyle: false\n    }); // Trigger normalize style like padding.\n\n    circle.dirty(false);\n\n    if (circle.__mapOriginalZ2 != null) {\n      circle.z2 = circle.__mapOriginalZ2;\n      circle.__mapOriginalZ2 = null;\n    }\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Fix for \n// var Region = require('../Region');\n// var zrUtil = require('zrender/src/core/util');\n// var geoCoord = [126, 25];\nvar points = [[[123.45165252685547, 25.73527164402261], [123.49731445312499, 25.73527164402261], [123.49731445312499, 25.750734064600884], [123.45165252685547, 25.750734064600884], [123.45165252685547, 25.73527164402261]]];\n\nfunction _default(mapType, region) {\n  if (mapType === 'china' && region.name === '') {\n    region.geometries.push({\n      type: 'polygon',\n      exterior: points[0]\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar VISUAL_PRIORITY = echarts.PRIORITY.VISUAL.COMPONENT;\necharts.registerVisual(VISUAL_PRIORITY, {\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var resetDefines = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      var pipelineContext = seriesModel.pipelineContext;\n\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\n        return;\n      }\n\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimension(seriesModel.getData())));\n    });\n    return resetDefines;\n  }\n}); // Only support color.\n\necharts.registerVisual(VISUAL_PRIORITY, {\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        var concreteDim = visualMapModel.getDataDimension(data);\n        var dimInfo = data.getDimensionInfo(concreteDim);\n\n        if (dimInfo != null) {\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\n          visualMeta.dimension = dimInfo.index;\n          visualMetaList.push(visualMeta);\n        }\n      }\n    }); // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  }\n}); // FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\n\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: seriesModel.getData().getVisual('color') // default color.\n\n  };\n\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n\n  return resultVisual.color;\n\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\n\nfunction _default(option) {\n  var visualMap = option && option.visualMap;\n\n  if (!zrUtil.isArray(visualMap)) {\n    visualMap = visualMap ? [visualMap] : [];\n  }\n\n  each(visualMap, function (opt) {\n    if (!opt) {\n      return;\n    } // rename splitList to pieces\n\n\n    if (has(opt, 'splitList') && !has(opt, 'pieces')) {\n      opt.pieces = opt.splitList;\n      delete opt.splitList;\n    }\n\n    var pieces = opt.pieces;\n\n    if (pieces && zrUtil.isArray(pieces)) {\n      each(pieces, function (piece) {\n        if (zrUtil.isObject(piece)) {\n          if (has(piece, 'start') && !has(piece, 'min')) {\n            piece.min = piece.start;\n          }\n\n          if (has(piece, 'end') && !has(piece, 'max')) {\n            piece.max = piece.end;\n          }\n        }\n      });\n    }\n  });\n}\n\nfunction has(obj, name) {\n  return obj && obj.hasOwnProperty && obj.hasOwnProperty(name);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Component = require(\"../../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nComponent.registerSubTypeDefaulter('visualMap', function (option) {\n  // Compatible with ec2, when splitNumber === 0, continuous visualMap will be used.\n  return !option.categories && (!(option.pieces ? option.pieces.length > 0 : option.splitNumber > 0) || option.calculable) ? 'continuous' : 'piecewise';\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nfunction onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES[model.mainType] && coordSys && coordSys.model !== targetCoordSysModel;\n}\n\nexports.onIrrelevantElement = onIrrelevantElement;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _parseSVG = require(\"zrender/lib/tool/parseSVG\");\n\nvar parseSVG = _parseSVG.parseSVG;\nvar makeViewBoxTransform = _parseSVG.makeViewBoxTransform;\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nvar Rect = require(\"zrender/lib/graphic/shape/Rect\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar assert = _util.assert;\nvar createHashMap = _util.createHashMap;\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar _default = {\n  /**\n   * @param {string} mapName\n   * @param {Object} mapRecord {specialAreas, geoJSON}\n   * @return {Object} {root, boundingRect}\n   */\n  load: function (mapName, mapRecord) {\n    var originRoot = inner(mapRecord).originRoot;\n\n    if (originRoot) {\n      return {\n        root: originRoot,\n        boundingRect: inner(mapRecord).boundingRect\n      };\n    }\n\n    var graphic = buildGraphic(mapRecord);\n    inner(mapRecord).originRoot = graphic.root;\n    inner(mapRecord).boundingRect = graphic.boundingRect;\n    return graphic;\n  },\n  makeGraphic: function (mapName, mapRecord, hostKey) {\n    // For performance consideration (in large SVG), graphic only maked\n    // when necessary and reuse them according to hostKey.\n    var field = inner(mapRecord);\n    var rootMap = field.rootMap || (field.rootMap = createHashMap());\n    var root = rootMap.get(hostKey);\n\n    if (root) {\n      return root;\n    }\n\n    var originRoot = field.originRoot;\n    var boundingRect = field.boundingRect; // For performance, if originRoot is not used by a view,\n    // assign it to a view, but not reproduce graphic elements.\n\n    if (!field.originRootHostKey) {\n      field.originRootHostKey = hostKey;\n      root = originRoot;\n    } else {\n      root = buildGraphic(mapRecord, boundingRect).root;\n    }\n\n    return rootMap.set(hostKey, root);\n  },\n  removeGraphic: function (mapName, mapRecord, hostKey) {\n    var field = inner(mapRecord);\n    var rootMap = field.rootMap;\n    rootMap && rootMap.removeKey(hostKey);\n\n    if (hostKey === field.originRootHostKey) {\n      field.originRootHostKey = null;\n    }\n  }\n};\n\nfunction buildGraphic(mapRecord, boundingRect) {\n  var svgXML = mapRecord.svgXML;\n  var result;\n  var root;\n\n  try {\n    result = svgXML && parseSVG(svgXML, {\n      ignoreViewBox: true,\n      ignoreRootClip: true\n    }) || {};\n    root = result.root;\n    assert(root != null);\n  } catch (e) {\n    throw new Error('Invalid svg format\\n' + e.message);\n  }\n\n  var svgWidth = result.width;\n  var svgHeight = result.height;\n  var viewBoxRect = result.viewBoxRect;\n\n  if (!boundingRect) {\n    boundingRect = svgWidth == null || svgHeight == null ? // If svg width / height not specified, calculate\n    // bounding rect as the width / height\n    root.getBoundingRect() : new BoundingRect(0, 0, 0, 0);\n\n    if (svgWidth != null) {\n      boundingRect.width = svgWidth;\n    }\n\n    if (svgHeight != null) {\n      boundingRect.height = svgHeight;\n    }\n  }\n\n  if (viewBoxRect) {\n    var viewBoxTransform = makeViewBoxTransform(viewBoxRect, boundingRect.width, boundingRect.height);\n    var elRoot = root;\n    root = new Group();\n    root.add(elRoot);\n    elRoot.scale = viewBoxTransform.scale;\n    elRoot.position = viewBoxTransform.position;\n  }\n\n  root.setClipPath(new Rect({\n    shape: boundingRect.plain()\n  }));\n  return {\n    root: root,\n    boundingRect: boundingRect\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/component/visualMap/VisualMapModel} visualMapModel\\\n * @param {module:echarts/ExtensionAPI} api\n * @param {Array.<number>} itemSize always [short, long]\n * @return {string} 'left' or 'right' or 'top' or 'bottom'\n */\nfunction getItemAlign(visualMapModel, api, itemSize) {\n  var modelOption = visualMapModel.option;\n  var itemAlign = modelOption.align;\n\n  if (itemAlign != null && itemAlign !== 'auto') {\n    return itemAlign;\n  } // Auto decision align.\n\n\n  var ecSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var realIndex = modelOption.orient === 'horizontal' ? 1 : 0;\n  var paramsSet = [['left', 'right', 'width'], ['top', 'bottom', 'height']];\n  var reals = paramsSet[realIndex];\n  var fakeValue = [0, null, 10];\n  var layoutInput = {};\n\n  for (var i = 0; i < 3; i++) {\n    layoutInput[paramsSet[1 - realIndex][i]] = fakeValue[i];\n    layoutInput[reals[i]] = i === 2 ? itemSize[0] : modelOption[reals[i]];\n  }\n\n  var rParam = [['x', 'width', 3], ['y', 'height', 0]][realIndex];\n  var rect = getLayoutRect(layoutInput, ecSize, modelOption.padding);\n  return reals[(rect.margin[rParam[2]] || 0) + rect[rParam[0]] + rect[rParam[1]] * 0.5 < ecSize[rParam[1]] * 0.5 ? 0 : 1];\n}\n/**\n * Prepare dataIndex for outside usage, where dataIndex means rawIndex, and\n * dataIndexInside means filtered index.\n */\n\n\nfunction makeHighDownBatch(batch, visualMapModel) {\n  zrUtil.each(batch || [], function (batchItem) {\n    if (batchItem.dataIndex != null) {\n      batchItem.dataIndexInside = batchItem.dataIndex;\n      batchItem.dataIndex = null;\n    }\n\n    batchItem.highlightKey = 'visualMap' + (visualMapModel ? visualMapModel.componentIndex : '');\n  });\n  return batch;\n}\n\nexports.getItemAlign = getItemAlign;\nexports.makeHighDownBatch = makeHighDownBatch;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  var processedMapType = {};\n  ecModel.eachSeriesByType('map', function (mapSeries) {\n    var mapType = mapSeries.getMapType();\n\n    if (mapSeries.getHostGeoModel() || processedMapType[mapType]) {\n      return;\n    }\n\n    var mapSymbolOffsets = {};\n    zrUtil.each(mapSeries.seriesGroup, function (subMapSeries) {\n      var geo = subMapSeries.coordinateSystem;\n      var data = subMapSeries.originalData;\n\n      if (subMapSeries.get('showLegendSymbol') && ecModel.getComponent('legend')) {\n        data.each(data.mapDimension('value'), function (value, idx) {\n          var name = data.getName(idx);\n          var region = geo.getRegion(name); // If input series.data is [11, 22, '-'/null/undefined, 44],\n          // it will be filled with NaN: [11, 22, NaN, 44] and NaN will\n          // not be drawn. So here must validate if value is NaN.\n\n          if (!region || isNaN(value)) {\n            return;\n          }\n\n          var offset = mapSymbolOffsets[name] || 0;\n          var point = geo.dataToPoint(region.center);\n          mapSymbolOffsets[name] = offset + 1;\n          data.setItemLayout(idx, {\n            point: point,\n            offset: offset\n          });\n        });\n      }\n    }); // Show label of those region not has legendSymbol(which is offset 0)\n\n    var data = mapSeries.getData();\n    data.each(function (idx) {\n      var name = data.getName(idx);\n      var layout = data.getItemLayout(idx) || {};\n      layout.showLabel = !mapSymbolOffsets[name];\n      data.setItemLayout(idx, layout);\n    });\n    processedMapType[mapType] = true;\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar actionInfo = {\n  type: 'selectDataRange',\n  event: 'dataRangeSelected',\n  // FIXME use updateView appears wrong\n  update: 'update'\n};\necharts.registerAction(actionInfo, function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'visualMap',\n    query: payload\n  }, function (model) {\n    model.setSelected(payload.selected);\n  });\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/coord/View} view\n * @param {Object} payload\n * @param {Object} [zoomLimit]\n */\nfunction updateCenterAndZoom(view, payload, zoomLimit) {\n  var previousZoom = view.getZoom();\n  var center = view.getCenter();\n  var zoom = payload.zoom;\n  var point = view.dataToPoint(center);\n\n  if (payload.dx != null && payload.dy != null) {\n    point[0] -= payload.dx;\n    point[1] -= payload.dy;\n    var center = view.pointToData(point);\n    view.setCenter(center);\n  }\n\n  if (zoom != null) {\n    if (zoomLimit) {\n      var zoomMin = zoomLimit.min || 0;\n      var zoomMax = zoomLimit.max || Infinity;\n      zoom = Math.max(Math.min(previousZoom * zoom, zoomMax), zoomMin) / previousZoom;\n    } // Zoom on given point(originX, originY)\n\n\n    view.scale[0] *= zoom;\n    view.scale[1] *= zoom;\n    var position = view.position;\n    var fixX = (payload.originX - position[0]) * (zoom - 1);\n    var fixY = (payload.originY - position[1]) * (zoom - 1);\n    position[0] -= fixX;\n    position[1] -= fixY;\n    view.updateTransform(); // Get the new center\n\n    var center = view.pointToData(point);\n    view.setCenter(center);\n    view.setZoom(zoom * previousZoom);\n  }\n\n  return {\n    center: view.getCenter(),\n    zoom: view.getZoom()\n  };\n}\n\nexports.updateCenterAndZoom = updateCenterAndZoom;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar createDimensions = require(\"../../data/helper/createDimensions\");\n\nvar List = require(\"../../data/List\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar extend = _util.extend;\nvar isArray = _util.isArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n *\n * @param {module:echarts/model/Series} seriesModel\n * @param {Object|Array.<string|Object>} opt opt or coordDimensions\n *        The options in opt, see `echarts/data/helper/createDimensions`\n * @param {Array.<string>} [nameList]\n * @return {module:echarts/data/List}\n */\nfunction _default(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({}, opt);\n  var source = seriesModel.getSource();\n  var dimensionsInfo = createDimensions(source, opt);\n  var list = new List(dimensionsInfo, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar visualDefault = require(\"../../visual/visualDefault\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar visualSolution = require(\"../../visual/visualSolution\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar numberUtil = require(\"../../util/number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\nvar noop = zrUtil.noop;\nvar VisualMapModel = echarts.extendComponentModel({\n  type: 'visualMap',\n  dependencies: ['series'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  stateList: ['inRange', 'outOfRange'],\n\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  replacableOptionKeys: ['inRange', 'outOfRange', 'target', 'controller', 'color'],\n\n  /**\n   * [lowerBound, upperBound]\n   *\n   * @readOnly\n   * @type {Array.<number>}\n   */\n  dataBound: [-Infinity, Infinity],\n\n  /**\n   * @readOnly\n   * @type {string|Object}\n   */\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    show: true,\n    zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    // 'all' or null/undefined: all series.\n    // A number or an array of number: the specified series.\n    // set min: 0, max: 200, only for campatible with ec2.\n    // In fact min max should not have default value.\n    min: 0,\n    // min value, must specified if pieces is not specified.\n    max: 200,\n    // max value, must specified if pieces is not specified.\n    dimension: null,\n    inRange: null,\n    // 'color', 'colorHue', 'colorSaturation', 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    outOfRange: null,\n    // 'color', 'colorHue', 'colorSaturation',\n    // 'colorLightness', 'colorAlpha',\n    // 'symbol', 'symbolSize'\n    left: 0,\n    // 'center'  'left'  'right'  {number} (px)\n    right: null,\n    // The same as left.\n    top: null,\n    // 'top'  'bottom'  'center'  {number} (px)\n    bottom: 0,\n    // The same as top.\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    // 'horizontal'  'vertical'\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    // \n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    // px0\n    padding: 5,\n    // px5\n    // css\n    textGap: 10,\n    //\n    precision: 0,\n    // 0\n    color: null,\n    //deprecatedec2piecesinRange/outOfRange\n    formatter: null,\n    text: null,\n    // ['', '']ec2text[0]text[1]\n    textStyle: {\n      color: '#333' // \n\n    }\n  },\n\n  /**\n   * @protected\n   */\n  init: function (option, parentModel, ecModel) {\n    /**\n     * @private\n     * @type {Array.<number>}\n     */\n    this._dataExtent;\n    /**\n     * @readOnly\n     */\n\n    this.targetVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.controllerVisuals = {};\n    /**\n     * @readOnly\n     */\n\n    this.textStyleModel;\n    /**\n     * [width, height]\n     * @readOnly\n     * @type {Array.<number>}\n     */\n\n    this.itemSize;\n    this.mergeDefaultAndTheme(option, ecModel);\n  },\n\n  /**\n   * @protected\n   */\n  optionUpdated: function (newOption, isInit) {\n    var thisOption = this.option; // FIXME\n    // necessary?\n    // Disable realtime view update if canvas is not supported.\n\n    if (!env.canvasSupported) {\n      thisOption.realtime = false;\n    }\n\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  },\n\n  /**\n   * @protected\n   */\n  resetVisual: function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  },\n\n  /**\n   * @protected\n   * @return {Array.<number>} An array of series indices.\n   */\n  getTargetSeriesIndices: function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n\n    return seriesIndices;\n  },\n\n  /**\n   * @public\n   */\n  eachTargetSeries: function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      callback.call(context, this.ecModel.getSeriesByIndex(seriesIndex));\n    }, this);\n  },\n\n  /**\n   * @pubilc\n   */\n  isTargetSeries: function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  },\n\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param {number|Array.<number>} value Real value, or this.dataBound[0 or 1].\n   * @param {boolean} [isCategory=false] Only available when value is number.\n   * @param {Array.<string>} edgeSymbols Open-close symbol when value is interval.\n   * @return {string}\n   * @protected\n   */\n  formatValueText: function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    var textValue;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n\n    textValue = isCategory ? value : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetExtent: function () {\n    var thisOption = this.option; // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  },\n\n  /**\n   * @public\n   * @param {module:echarts/data/List} list\n   * @return {string} Concrete dimention. If return null/undefined,\n   *                  no dimension used.\n   */\n  getDataDimension: function (list) {\n    var optDim = this.option.dimension;\n    var listDimensions = list.dimensions;\n\n    if (optDim == null && !listDimensions.length) {\n      return;\n    }\n\n    if (optDim != null) {\n      return list.getDimension(optDim);\n    }\n\n    var dimNames = list.dimensions;\n\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = list.getDimensionInfo(dimName);\n\n      if (!dimInfo.isCalculationCoord) {\n        return dimName;\n      }\n    }\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  getExtent: function () {\n    return this._dataExtent.slice();\n  },\n\n  /**\n   * @protected\n   */\n  completeVisualOption: function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n\n    zrUtil.merge(controller, base); // Do not override\n\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange'); // completeInactive.call(this, target, 'outOfRange', 'inRange');\n\n    completeController.call(this, controller);\n\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color) // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      } // Compatible with previous logic, always give a defautl color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the defualt color, set inRange: {color: null}.\n\n\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      }; // If using shortcut like: {inRange: 'symbol'}, complete default value.\n\n      each(this.stateList, function (state) {\n        var visualType = base[state];\n\n        if (zrUtil.isString(visualType)) {\n          var defa = visualDefault.get(visualType, 'active', isCategory);\n\n          if (defa) {\n            base[state] = {};\n            base[state][visualType] = defa;\n          } else {\n            // Mark as not specified.\n            delete base[state];\n          }\n        }\n      }, this);\n    }\n\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n\n          if (defa != null) {\n            optAbsent[visualType] = defa; // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state]; // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        } // Consistent symbol and symbolSize if not specified.\n\n\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? 'roundRect' : ['roundRect']);\n        }\n\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        } // Filter square and none.\n\n\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' || symbol === 'square' ? 'roundRect' : symbol;\n        }); // Normalize symbolSize\n\n        var symbolSize = visuals.symbolSize;\n\n        if (symbolSize != null) {\n          var max = -Infinity; // symbolSize can be object when categories defined.\n\n          eachVisual(symbolSize, function (value) {\n            value > max && (max = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  resetItemSize: function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  },\n\n  /**\n   * @public\n   */\n  isCategory: function () {\n    return !!this.option.categories;\n  },\n\n  /**\n   * @public\n   * @abstract\n   */\n  setSelected: noop,\n\n  /**\n   * @public\n   * @abstract\n   * @param {*|module:echarts/data/List} valueOrData\n   * @param {number} dataIndex\n   * @return {string} state See this.stateList\n   */\n  getValueState: noop,\n\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param {Function} getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n  getVisualMeta: noop\n});\nvar _default = VisualMapModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Geo = require(\"./Geo\");\n\nvar layout = require(\"../../util/layout\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar geoSourceManager = require(\"./geoSourceManager\");\n\nvar mapDataStorage = require(\"./mapDataStorage\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Resize method bound to the geo\n * @param {module:echarts/coord/geo/GeoModel|module:echarts/chart/map/MapModel} geoModel\n * @param {module:echarts/ExtensionAPI} api\n */\nfunction resizeGeo(geoModel, api) {\n  var boundingCoords = geoModel.get('boundingCoords');\n\n  if (boundingCoords != null) {\n    var leftTop = boundingCoords[0];\n    var rightBottom = boundingCoords[1];\n\n    if (isNaN(leftTop[0]) || isNaN(leftTop[1]) || isNaN(rightBottom[0]) || isNaN(rightBottom[1])) {} else {\n      this.setBoundingRect(leftTop[0], leftTop[1], rightBottom[0] - leftTop[0], rightBottom[1] - leftTop[1]);\n    }\n  }\n\n  var rect = this.getBoundingRect();\n  var boxLayoutOption;\n  var center = geoModel.get('layoutCenter');\n  var size = geoModel.get('layoutSize');\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  var aspect = rect.width / rect.height * this.aspectScale;\n  var useCenterAndSize = false;\n\n  if (center && size) {\n    center = [numberUtil.parsePercent(center[0], viewWidth), numberUtil.parsePercent(center[1], viewHeight)];\n    size = numberUtil.parsePercent(size, Math.min(viewWidth, viewHeight));\n\n    if (!isNaN(center[0]) && !isNaN(center[1]) && !isNaN(size)) {\n      useCenterAndSize = true;\n    } else {}\n  }\n\n  var viewRect;\n\n  if (useCenterAndSize) {\n    var viewRect = {};\n\n    if (aspect > 1) {\n      // Width is same with size\n      viewRect.width = size;\n      viewRect.height = size / aspect;\n    } else {\n      viewRect.height = size;\n      viewRect.width = size * aspect;\n    }\n\n    viewRect.y = center[1] - viewRect.height / 2;\n    viewRect.x = center[0] - viewRect.width / 2;\n  } else {\n    // Use left/top/width/height\n    boxLayoutOption = geoModel.getBoxLayoutParams(); // 0.75 rate\n\n    boxLayoutOption.aspect = aspect;\n    viewRect = layout.getLayoutRect(boxLayoutOption, {\n      width: viewWidth,\n      height: viewHeight\n    });\n  }\n\n  this.setViewRect(viewRect.x, viewRect.y, viewRect.width, viewRect.height);\n  this.setCenter(geoModel.get('center'));\n  this.setZoom(geoModel.get('zoom'));\n}\n/**\n * @param {module:echarts/coord/Geo} geo\n * @param {module:echarts/model/Model} model\n * @inner\n */\n\n\nfunction setGeoCoords(geo, model) {\n  zrUtil.each(model.get('geoCoord'), function (geoCoord, name) {\n    geo.addGeoCoord(name, geoCoord);\n  });\n}\n\nvar geoCreator = {\n  // For deciding which dimensions to use when creating list data\n  dimensions: Geo.prototype.dimensions,\n  create: function (ecModel, api) {\n    var geoList = []; // FIXME Create each time may be slow\n\n    ecModel.eachComponent('geo', function (geoModel, idx) {\n      var name = geoModel.get('map');\n      var aspectScale = geoModel.get('aspectScale');\n      var invertLongitute = true;\n      var mapRecords = mapDataStorage.retrieveMap(name);\n\n      if (mapRecords && mapRecords[0] && mapRecords[0].type === 'svg') {\n        aspectScale == null && (aspectScale = 1);\n        invertLongitute = false;\n      } else {\n        aspectScale == null && (aspectScale = 0.75);\n      }\n\n      var geo = new Geo(name + idx, name, geoModel.get('nameMap'), invertLongitute);\n      geo.aspectScale = aspectScale;\n      geo.zoomLimit = geoModel.get('scaleLimit');\n      geoList.push(geo);\n      setGeoCoords(geo, geoModel);\n      geoModel.coordinateSystem = geo;\n      geo.model = geoModel; // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.resize(geoModel, api);\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var coordSys = seriesModel.get('coordinateSystem');\n\n      if (coordSys === 'geo') {\n        var geoIndex = seriesModel.get('geoIndex') || 0;\n        seriesModel.coordinateSystem = geoList[geoIndex];\n      }\n    }); // If has map series\n\n    var mapModelGroupBySeries = {};\n    ecModel.eachSeriesByType('map', function (seriesModel) {\n      if (!seriesModel.getHostGeoModel()) {\n        var mapType = seriesModel.getMapType();\n        mapModelGroupBySeries[mapType] = mapModelGroupBySeries[mapType] || [];\n        mapModelGroupBySeries[mapType].push(seriesModel);\n      }\n    });\n    zrUtil.each(mapModelGroupBySeries, function (mapSeries, mapType) {\n      var nameMapList = zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('nameMap');\n      });\n      var geo = new Geo(mapType, mapType, zrUtil.mergeAll(nameMapList));\n      geo.zoomLimit = zrUtil.retrieve.apply(null, zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('scaleLimit');\n      }));\n      geoList.push(geo); // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.aspectScale = mapSeries[0].get('aspectScale');\n      geo.resize(mapSeries[0], api);\n      zrUtil.each(mapSeries, function (singleMapSeries) {\n        singleMapSeries.coordinateSystem = geo;\n        setGeoCoords(geo, singleMapSeries);\n      });\n    });\n    return geoList;\n  },\n\n  /**\n   * Fill given regions array\n   * @param  {Array.<Object>} originRegionArr\n   * @param  {string} mapName\n   * @param  {Object} [nameMap]\n   * @return {Array}\n   */\n  getFilledRegions: function (originRegionArr, mapName, nameMap) {\n    // Not use the original\n    var regionsArr = (originRegionArr || []).slice();\n    var dataNameMap = zrUtil.createHashMap();\n\n    for (var i = 0; i < regionsArr.length; i++) {\n      dataNameMap.set(regionsArr[i].name, regionsArr[i]);\n    }\n\n    var source = geoSourceManager.load(mapName, nameMap);\n    zrUtil.each(source.regions, function (region) {\n      var name = region.name;\n      !dataNameMap.get(name) && regionsArr.push({\n        name: name\n      });\n    });\n    return regionsArr;\n  }\n};\necharts.registerCoordinateSystem('geo', geoCreator);\nvar _default = geoCreator;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Calculate slider move result.\n * Usage:\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n *\n * @param {number} delta Move length.\n * @param {Array.<number>} handleEnds handleEnds[0] can be bigger then handleEnds[1].\n *              handleEnds will be modified in this method.\n * @param {Array.<number>} extent handleEnds is restricted by extent.\n *              extent[0] should less or equals than extent[1].\n * @param {number|string} handleIndex Can be 'all', means that both move the two handleEnds.\n * @param {number} [minSpan] The range of dataZoom can not be smaller than that.\n *              If not set, handle0 and cross handle1. If set as a non-negative\n *              number (including `0`), handles will push each other when reaching\n *              the minSpan.\n * @param {number} [maxSpan] The range of dataZoom can not be larger than that.\n * @return {Array.<number>} The input handleEnds.\n */\nfunction _default(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0]; // Notice maxSpan and minSpan can be null/undefined.\n\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n\n  if (handleIndex === 'all') {\n    var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleSpan = restrict(handleSpan, [0, extentSpan]);\n    minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n    handleIndex = 0;\n  }\n\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta; // Restrict in extent.\n\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent); // Expand span.\n\n  var currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbidden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  } // Shrink span.\n\n\n  var currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n\n  return handleEnds;\n}\n\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex]; // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\n\nfunction restrict(value, extend) {\n  return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME \n\n/**\n * @param {Array.<module:echarts/data/List>} datas\n * @param {string} statisticType 'average' 'sum'\n * @inner\n */\nfunction dataStatistics(datas, statisticType) {\n  var dataNameMap = {};\n  zrUtil.each(datas, function (data) {\n    data.each(data.mapDimension('value'), function (value, idx) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var mapKey = 'ec-' + data.getName(idx);\n      dataNameMap[mapKey] = dataNameMap[mapKey] || [];\n\n      if (!isNaN(value)) {\n        dataNameMap[mapKey].push(value);\n      }\n    });\n  });\n  return datas[0].map(datas[0].mapDimension('value'), function (value, idx) {\n    var mapKey = 'ec-' + datas[0].getName(idx);\n    var sum = 0;\n    var min = Infinity;\n    var max = -Infinity;\n    var len = dataNameMap[mapKey].length;\n\n    for (var i = 0; i < len; i++) {\n      min = Math.min(min, dataNameMap[mapKey][i]);\n      max = Math.max(max, dataNameMap[mapKey][i]);\n      sum += dataNameMap[mapKey][i];\n    }\n\n    var result;\n\n    if (statisticType === 'min') {\n      result = min;\n    } else if (statisticType === 'max') {\n      result = max;\n    } else if (statisticType === 'average') {\n      result = sum / len;\n    } else {\n      result = sum;\n    }\n\n    return len === 0 ? NaN : result;\n  });\n}\n\nfunction _default(ecModel) {\n  var seriesGroups = {};\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var hostGeoModel = seriesModel.getHostGeoModel();\n    var key = hostGeoModel ? 'o' + hostGeoModel.id : 'i' + seriesModel.getMapType();\n    (seriesGroups[key] = seriesGroups[key] || []).push(seriesModel);\n  });\n  zrUtil.each(seriesGroups, function (seriesList, key) {\n    var data = dataStatistics(zrUtil.map(seriesList, function (seriesModel) {\n      return seriesModel.getData();\n    }), seriesList[0].get('mapValueCalculation'));\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].originalData = seriesList[i].getData();\n    } // FIXME Put where?\n\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].seriesGroup = seriesList;\n      seriesList[i].needsDrawMap = i === 0 && !seriesList[i].getHostGeoModel();\n      seriesList[i].setData(data.cloneShallow());\n      seriesList[i].mainSeries = seriesList[0];\n    }\n  });\n}\n\nmodule.exports = _default;"],"sourceRoot":""}